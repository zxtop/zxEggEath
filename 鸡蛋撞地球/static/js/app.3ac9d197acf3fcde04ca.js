webpackJsonp([1],{"0dYW":function(t,e){},"7Q5p":function(t,e){t.exports={title:"鸡蛋撞地球",version:"2.0.11",id:'{"status":200,"uid":"cju9o2f2100064t69dbop6snm"}',stages:[]}},"9vCu":function(t,e,a){"use strict";var i=a("9bLE"),n=a("QXBk"),s=void 0,o={data:function(){return{time:3,question:question,resultUrl:void 0}},computed:{goldnum:function(t,e){return store.state.goldnum}},methods:{createApp:function(){return new i.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},mounted:function(){var t=this;if(question.one.end.endBg.image.show&&(this.resultUrl=res[question.one.end.endBg.image.name].url),question.one.end.endBg.animate.show){app.stop(),(s=this.createApp()).view.style.width="19.2rem",s.view.style.height="10.8rem",this.$refs.canvas.appendChild(s.view);var e=s.stage,a=Object(n.a)(question.one.end.endBg.animate.name);a.state.setAnimation(1,"animation",question.one.end.endBg.animate.loop);console.log(e),a.x=question.one.end.endBg.animate.x,a.y=question.one.end.endBg.animate.y,a.scale.set(question.one.gameBgSound.scale),e.addChild(a)}console.log("金币页+"+store.state.goldnum),this.fadeIn=!0,console.log(res[question.one.end.endBg.image.name]);var i=setInterval(function(){if(t.time--,0===t.time){clearInterval(i);window.parent.postMessage({type:"close"},"*")}},1e3)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("div",[a("img",{staticClass:"bg",attrs:{src:"static/images/result.png",id:"bgImg"}}),t._v(" "),a("span",{staticClass:"txt",style:{color:t.question.one.end.goldText.color,left:t.question.one.end.goldText.x/100+"rem",top:t.question.one.end.goldText.y/100+"rem",fontSize:t.question.one.end.goldText.fontSize/100+"rem",fontFamily:t.question.one.end.goldText.fontFamily,fontWeight:t.question.one.end.goldText.fontWeight,fontStyle:t.question.one.end.goldText.fontStyle}},[t._v(t._s(t.goldnum))]),t._v(" "),t.question.one.end.endBg.image.show?a("img",{staticClass:"resimg",style:{left:t.question.one.end.endBg.image.x/100+"rem",top:t.question.one.end.endBg.image.y/100+"rem",width:t.question.one.end.endBg.image.width/100+"rem",height:t.question.one.end.endBg.image.height/100+"rem"},attrs:{src:t.resultUrl}}):t._e()]),t._v(" "),a("audio",{attrs:{autoplay:"autoplay",src:"static/audios/result.mp3"}}),t._v(" "),t.question.one.end.endBg.animate.show?a("div",{ref:"canvas",staticClass:"canvas"}):t._e()])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("JLmz")},"data-v-dde5dab6",null);e.a=l.exports},DjJD:function(t,e){},"E/U7":function(t,e){t.exports={port:8080}},IcnI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),n=a("R4Sj"),s=a("pne8");a.n(s);i.default.use(n.a);var o={postAnswer:function(t){var e=t.state;console.log(e.postArr,"整体答题数据"),Object(s.postAnswer)(e.postArr,e.testNum)},defaultPushToPostArr:function(t,e){t.state.postArr.push(e)},increment:function(t){var e=t.state;e.pageNumber++,console.log(e)},decrement:function(t){t.state.pageNumber--},setPageNumber:function(t,e){t.state.pageNumber=e},pushToPostArr:function(t,e){var a=t.state;console.log(e,"第"+e.id+"道题答题数据"),a.postArr.splice(e.id,1,e)}};window.store=new n.a.Store({state:{postArr:[],resultArr:[],pisShow:!1,pShow:!1,goldnum:0,testNum:1,result:[],isShow:!1,pageNumber:0,question:null},actions:o,mutations:{setIsPost:function(t,e){t.isShow=e},setpIsPost:function(t,e){t.pisShow=e}}})},JLmz:function(t,e){},JdX2:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),n=a("9bLE"),s=a("5ohs"),o=a("QBX4");a("IcnI");var r={name:"App",data:function(){return{}},components:{End:s.a,Pend:o.a},computed:{isShow:function(t,e){return store.state.isShow},pisShow:function(t,e){return store.state.pisShow}},mounted:function(){console.log("APP组件加载完成")}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t._v(" "),t.isShow?a("End"):t._e(),t._v(" "),t.pisShow?a("Pend"):t._e(),t._v(" "),t.$store.state.isShow?a("div",{staticClass:"text"}):t._e()],1)},staticRenderFns:[]};var d=a("C7Lr")(r,l,!1,function(t){a("0dYW")},null,null).exports,g=a("KGCO"),m=a("5L/K"),u=a("zwgh"),c=(a("IcnI"),a("V2if")),h=a.n(c),p=a("pne8"),v=a("AA3o"),f=a.n(v),w=a("xSur"),b=a.n(w),_=a("UH4H"),x=(a("xtmC"),function(){function t(){f()(this,t),this.pixiStage=null,this.currentTarget=null,this.mainArr=[{obj:null,x:425,y:648,width:243,height:161,xk_x:272,xk_y:366},{obj:null,x:740,y:648,width:243,height:161,xk_x:584,xk_y:366},{obj:null,x:1054,y:648,width:243,height:161,xk_x:900,xk_y:366}],this.things=[{name:"image_case1",key:"case",value:"2",x:1452,y:280,width:190,height:127},{name:"image_case2",key:"case",value:"3",x:1690,y:280,width:191,height:127},{name:"image_goods1",key:"goods",value:"1",x:1430,y:492,width:142,height:122},{name:"image_goods2",key:"goods",value:"2",x:1594,y:492,width:143,height:112},{name:"image_goods3",key:"goods",value:"3",x:1782,y:476,width:97,height:132},{name:"image_flight1",key:"flight",value:"1",x:1442,y:698,width:111,height:119},{name:"image_flight2",key:"flight",value:"2",x:1614,y:698,width:100,height:123},{name:"image_flight3",key:"flight",value:"3",x:1782,y:698,width:94,height:132}],this.guideLayer=null,this.mouseStyle=null,this.guideText=null,this.guideTextCont={text1:"将货架上的每排装置选取一个装备到鸡蛋身上",text2:"三个鸡蛋全部装备完毕即可点击确认进行试验了呦~"},this.guideBg=null,this.guideTextContainer=null,this.dragging=!1,this.startCos=null,this.startPos=new n.Point(0,0),this.offsetPos=new n.Point(0,0),this.zbContainer=null,this.comContainerArr=[],this.eggArr=[],this.a=null,this.b=null,this.tip=!0,this.mouseStyleAn=null,this.mouseStyleAn2=null,this.mouseStyleAn3=null,this.zbContainerArr=[],this.touched=!1,this.egg_index=null,this.rightResult=["2_1_1","2_1_2","2_1_3","2_2_1","2_2_2","2_2_3","2_3_1","2_3_2","2_3_3","3_1_1","3_1_2","3_1_3","3_2_1","3_2_2","3_2_3","3_3_1","3_3_2","3_3_3"],this.button=null,this.shaw_button=null,this.finsh=null,this.gameBg=null,this.shadow=null,this.zhiyin2=null,this.complete=!0,this.cursor=!1}return b()(t,[{key:"exec",value:function(){console.log("= 开始执行逻辑 =");var t=this;this.initGame(store.state.pageNumber),t.pixiStage.on("pointermove",function(e){var a=e.data.getLocalPosition(stage);a.x>0&&a.x<1910&&a.y>0&&a.y<1070&&t.cursor&&(t.pixiStage.cursor="none",t.mouseStyle.x=a.x,t.mouseStyle.y=a.y)}),stage.on("pointermove",this.moveTarget.bind(this)),stage.on("pointerup",this.leaveMoveTarget.bind(this)),console.log(this.pixiStage),this.pixiStage.children[1].children[0].children[1].cursor="none"}},{key:"initGame",value:function(t){var e=this;this.a=(this.mainArr[1].x-this.mainArr[0].x)/2+this.mainArr[0].x,this.b=(this.mainArr[2].x-this.mainArr[1].x)/2+this.mainArr[1].x,console.log("第"+t+"页");var a=this;this.pixiStage=stage.getChildByName("GAME").getChildByName("GAME"+t),this.gameBg=a.pixiStage.children[0].children[0],this.gameBg.checked=PIXI.Texture.fromImage("image_end"),this.gameBg.default=PIXI.Texture.fromImage("image_bg_default"),this.pixiStage.interactive=!0,this.comContainer=new n.Container,this.zbContainer=new n.Container,this.zbContainer.x=0,this.zbContainer.y=0,this.zbContainer.width=1920,this.zbContainer.height=1080,Object(m.RenderPageByIndex)(t),this.guideLayer=new n.Container,this.guideLayer.name="guideLayer";var i=new n.Graphics;i.beginFill(0),i.lineStyle(2,10092356,1),i.drawRect(0,0,1920,1080),i.endFill(),i.alpha=.5,this.mouseStyleAn=Object(u.getAnimation)("animation_main"),this.mouseStyleAn.name="hand";var s=this.mouseStyleAn.state.setAnimation(0,"zhiyin1",!0);this.mouseStyleAn.x=990,this.mouseStyleAn.y=500,this.mouseStyleAn.durationTime=s.animation.duration,this.mouseStyleAn2=Object(u.getAnimation)("animation_main"),this.mouseStyleAn2.name="hand";var o=this.mouseStyleAn2.state.setAnimation(0,"zhiyin2",!0);this.mouseStyleAn2.x=990,this.mouseStyleAn2.y=500,this.mouseStyleAn2.durationTime=o.animation.duration,this.mouseStyleAn2.visible=!1,this.mouseStyleAn3=Object(u.getAnimation)("animation_main"),this.mouseStyleAn3.name="hand";var r=this.mouseStyleAn3.state.setAnimation(0,"zhiyin3",!0);this.mouseStyleAn3.x=990,this.mouseStyleAn3.y=500,this.mouseStyleAn3.durationTime=r.animation.duration,this.mouseStyleAn3.visible=!1,this.zhiyin2=Object(u.getAnimation)("animation_main"),this.zhiyin2.name="handclick";var l=this.zhiyin2.state.setAnimation(0,"zhiyin4",!0);this.zhiyin2.x=980,this.zhiyin2.y=550,this.zhiyin2.durationTime=l.animation.duration,this.zhiyin2.visible=!1,this.mainArr.map(function(t,e){var i=Object(u.getAnimation)("animation_main");i.name="egg",i.x=t.x,i.y=t.y,i.startX=t.x,i.startY=t.y,i.num1=0,i.num2=0,i.num3=0,i.str="1_0_0",i.finsh=!1,i.goned=!1,i.state.setAnimation(1,"animation01",!1),a.setSkinName(i,i.str);var n=new PIXI.Sprite.fromImage(res.image_xk.url);n.x=t.xk_x,n.y=t.xk_y,n.alpha=0,a.comContainer.addChild(n),0!=e?a.comContainer.addChild(i):a.pixiStage.addChild(i),a.comContainerArr.push(n),a.eggArr.push(i)});var d=new PIXI.Sprite.fromImage(res.image_zb_bg.url);d.x=1311,d.y=219,this.zbContainer.addChild(d),this.things.map(function(t,i){var n=new PIXI.Sprite.fromImage(res[t.name].url);n.name=t.name,n.key=t.key,n.value=t.value,n.startX=t.x+t.width/2,n.startY=t.y+t.height/2,n.interactive=!0,n.anchor.set(.5,.5),n.startWidth=t.width,n.startHeight=t.height,n.x=t.x+n.width/2,n.y=t.y+n.height/2,a.tip&&0==i&&(console.log("只能拖动一个"),n.on("pointerover",a.overAndScale.bind(e)),n.on("pointerout",a.outAndScale.bind(e)),n.on("pointerdown",a.getCurrentTarget.bind(e))),a.zbContainer.addChild(n)}),this.guideTextContainer=new n.Container,this.guideTextContainer.x=400,this.guideTextContainer.y=200,this.guideText=new PIXI.Text(this.guideTextCont.text1,{fontFamily:"微软雅黑",fontSize:34,fill:"#000",align:"center"});var g=this.guideText.x-20,c=this.guideText.y-10,h=this.guideText.width+40,v=this.guideText.height+20;this.guideBg=new n.Graphics,this.guideBg.beginFill(16777215),this.guideBg.lineStyle(2,10092356,1),this.guideBg.drawRoundedRect(g,c,h,v,5),this.guideBg.endFill(),this.mouseStyle=new PIXI.Sprite.fromImage(res.image_hand1.url),this.mouseStyle.default=PIXI.Texture.fromImage("image_hand1"),this.mouseStyle.downed=PIXI.Texture.fromImage("image_hand2"),this.mouseStyle.anchor.set(.4),this.shaw_button=new PIXI.Sprite.fromImage(res.image_but_not.url),this.shaw_button.default=PIXI.Texture.fromImage("image_but_not"),this.shaw_button.downed=PIXI.Texture.fromImage("image_button_can"),this.shaw_button.x=625,this.shaw_button.y=780,this.button=new PIXI.Sprite.fromImage(res.image_button_can.url),this.button.x=625,this.button.y=780,this.button.visible=!1,this.finsh=new PIXI.Sprite.fromImage(res.image_fish.url),this.finsh.default=PIXI.Texture.fromImage("image_fish"),this.finsh.unable=PIXI.Texture.fromImage("image_button"),this.finsh.x=1550,this.finsh.y=948,this.finsh.interactive=!0,this.finsh.on("pointerdown",function(){if(0==a.guideLayer.visible){a.finsh.texture=a.finsh.unable;var t=new p.AnswerInfo;t.init({type:0,useranswer:"",answer:"",id:store.state.pageNumber,rightnum:1,wrongnum:0}),store.dispatch("pushToPostArr",t),store.dispatch("postAnswer")}}),this.finsh.on("poninterup",function(){console.log("dddd"),a.finsh.texture=a.finsh.default}),this.guideTextContainer.addChild(this.guideBg),this.guideTextContainer.addChild(this.guideText),this.guideLayer.addChild(i),this.guideLayer.addChild(this.guideTextContainer),this.guideLayer.addChild(this.button),this.pixiStage.addChild(this.finsh),this.pixiStage.addChild(this.shaw_button),this.pixiStage.addChild(this.comContainer),this.pixiStage.addChild(this.guideLayer),this.pixiStage.addChild(this.zbContainer),this.pixiStage.addChild(this.mouseStyle),this.pixiStage.addChild(this.mouseStyleAn),this.pixiStage.addChild(this.mouseStyleAn2),this.pixiStage.addChild(this.mouseStyleAn3),this.pixiStage.addChild(this.zhiyin2),this.shadow=new n.Container,this.shadow.shadow_lay=new n.Graphics,this.shadow.shadow_lay.beginFill(0),this.shadow.shadow_lay.lineStyle(0,10092356,0),this.shadow.shadow_lay.drawRect(0,0,1920,1080),this.shadow.shadow_lay.endFill(),this.shadow.shadow_lay.alpha=.8,this.shadow.addChild(this.shadow.shadow_lay),this.shadow.visible=!1,this.pixiStage.addChild(this.shadow),a.pixiStage.setChildIndex(a.pixiStage.getChildByName("egg"),a.pixiStage.children.length-2),a.pixiStage.setChildIndex(a.mouseStyle,a.pixiStage.children.length-1)}},{key:"setSkinName",value:function(t,e){var a=t.skeleton;a.setSkin1(null),a.setSkinByName1(e)}},{key:"overAndScale",value:function(t){var e=t.currentTarget;_.TweenLite.to(e,.4,{width:1.05*e.width,height:1.05*e.height}),this.cursor=!0,this.mouseStyle.visible=!0}},{key:"outAndScale",value:function(t){var e=t.currentTarget;_.TweenLite.to(e,.4,{width:e.startWidth,height:e.startHeight}),this.cursor=!1,this.pixiStage.cursor="auto",this.mouseStyle.visible=!1}},{key:"getCurrentTarget",value:function(t){if(!this.dragging&&null==this.currentTarget&&this.complete){this.complete=!1,this.dragging=!0;this.currentTarget=t.target,this.mouseStyle.texture=this.mouseStyle.downed,this.startCos=t.data.getLocalPosition(this.pixiStage),this.startPos.x=this.currentTarget.x,this.startPos.y=this.currentTarget.y,this.offsetPos.x=this.startCos.x-this.startPos.x,this.offsetPos.y=this.startCos.y-this.startPos.y,this.pixiStage.setChildIndex(this.zbContainer,this.pixiStage.children.length-2),this.copySprit()}}},{key:"moveTarget",value:function(t){if(this.currentTarget&&this.dragging){this.mouseStyleAn.alpha=0,this.mouseStyleAn2.alpha=0,this.mouseStyleAn3.alpha=0;this.tip=!1;var e=t.data.getLocalPosition(this.pixiStage);this.currentTarget.x=e.x-this.offsetPos.x,this.currentTarget.y=e.y-this.offsetPos.y,1==this.guideLayer.visible?this.currentTarget.x+this.currentTarget.width/2>this.mainArr[0].x-this.mainArr[0].width/2&&this.currentTarget.x-this.currentTarget.width/2<this.mainArr[0].x+this.mainArr[0].width/2&&this.currentTarget.y+this.currentTarget.height/2>this.mainArr[0].y-this.mainArr[0].height&&this.currentTarget.y-this.currentTarget.height/2<this.mainArr[0].y&&(console.log("碰到=====11111"),this.comContainerArr[0].alpha=1,this.comContainerArr[1].alpha=0,this.comContainerArr[2].alpha=0,this.touched=!0,this.egg_index=0):this.currentTarget.x+this.currentTarget.width/2>this.mainArr[0].x-this.mainArr[0].width/2&&this.currentTarget.x<this.a&&this.currentTarget.y+this.currentTarget.height/2>this.mainArr[0].y-this.mainArr[0].height&&this.currentTarget.y-this.currentTarget.height/2<this.mainArr[0].y?(console.log("11111"),this.comContainerArr[0].alpha=1,this.comContainerArr[1].alpha=0,this.comContainerArr[2].alpha=0,this.touched=!0,this.egg_index=0):this.currentTarget.x>this.a&&this.currentTarget.x<this.b&&this.currentTarget.y+this.currentTarget.height/2>this.mainArr[1].y-this.mainArr[1].height&&this.currentTarget.y-this.currentTarget.height/2<this.mainArr[1].y?(console.log("22222"),this.comContainerArr[0].alpha=0,this.comContainerArr[1].alpha=1,this.comContainerArr[2].alpha=0,this.touched=!0,this.egg_index=1):this.currentTarget.x>this.b&&this.currentTarget.x-this.currentTarget.width/2<this.mainArr[2].x+this.mainArr[2].width/2&&this.currentTarget.y+this.currentTarget.height/2>this.mainArr[0].y-this.mainArr[0].height&&this.currentTarget.y-this.currentTarget.height/2<this.mainArr[0].y?(console.log("33333"),this.comContainerArr[0].alpha=0,this.comContainerArr[1].alpha=0,this.comContainerArr[2].alpha=1,this.touched=!0,this.egg_index=2):(console.log("没碰到"),this.comContainerArr[0].alpha=0,this.comContainerArr[1].alpha=0,this.comContainerArr[2].alpha=0,this.touched=!1)}}},{key:"leaveMoveTarget",value:function(t){if(this.currentTarget){var e=this;if(e.cursor=!1,e.mouseStyle.visible=!1,e.pixiStage.cursor="auto",e.currentTarget.x==e.startPos.x&&(e.touched=!1,e.complete=!0),this.touched){switch(console.log("碰到了====="),e.complete=!0,e.egg_index){case 0:var a=e.eggArr[e.egg_index].str;if(e.comContainerArr[e.egg_index].alpha=0,"case"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(a,0,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num1=1),"goods"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(a,2,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num2=1),"flight"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(a,4,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num3=1),1==e.eggArr[e.egg_index].num1&&1==e.eggArr[e.egg_index].num2&&1==e.eggArr[e.egg_index].num3)if(console.log("111，首次装备成功"),e.eggArr[e.egg_index].finsh=!0,1==e.guideLayer.visible){e.zhiyin2.visible=!0,e.guideText.setText(e.guideTextCont.text2),e.guideBg.width=800;e.setSkinName(e.eggArr[1],"2_1_2"),e.setSkinName(e.eggArr[2],"3_2_3"),e.pixiStage.setChildIndex(e.comContainer,e.pixiStage.children.length-3),e.button.visible=!0,e.button.interactive=!0,e.button.on("pointerdown",function(){e.guideLayer.visible=!1,e.setSkinName(e.eggArr[0],"1_0_0"),e.setSkinName(e.eggArr[1],"1_0_0"),e.setSkinName(e.eggArr[2],"1_0_0"),e.eggArr.map(function(t,e){t.num1=0,t.num2=0,t.num3=0,t.str="1_0_0",t.goned=!1,t.finsh=!1}),e.zhiyin2.visible=!1,e.tip=!1}),e.getEvents()}else 1==e.eggArr[0].finsh&&1==e.eggArr[1].finsh&&1==e.eggArr[2].finsh&&(e.shaw_button.texture=e.shaw_button.downed,e.shaw_button.interactive=!0,e.shaw_button.on("pointerdown",function(){console.log("鸡蛋下落"),_.TweenLite.to(e.zbContainer,.3,{x:566}),e.shaw_button.visible=!1,res.audio_down.sound.play(),e.eggArr.map(function(t,a){_.TweenLite.to(t,1,{y:1920,onComplete:function(){e.gameBg.children[0].texture=e.gameBg.checked,e.speedDown(t)}})})}));break;case 1:var i=e.eggArr[e.egg_index].str;if(e.comContainerArr[e.egg_index].alpha=0,"case"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(i,0,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num1=1),"goods"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(i,2,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num2=1),"flight"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(i,4,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num3=1),1==e.eggArr[e.egg_index].num1&&1==e.eggArr[e.egg_index].num2&&1==e.eggArr[e.egg_index].num3)if(console.log("222,首次装备成功"),e.eggArr[e.egg_index].finsh=!0,1==e.guideLayer.visible){e.guideText.setText(e.guideTextCont.text2),e.guideBg.width=800;var n=e.rightResult[Math.floor(Math.random()*e.rightResult.length)],s=e.rightResult[Math.floor(Math.random()*e.rightResult.length)];e.setSkinName(e.eggArr[0],n),e.setSkinName(e.eggArr[2],s),e.button.visible=!0,e.button.interactive=!0,e.button.on("pointerdown",function(){e.guideLayer.visible=!1,e.setSkinName(e.eggArr[0],"1_0_0"),e.setSkinName(e.eggArr[1],"1_0_0"),e.setSkinName(e.eggArr[2],"1_0_0"),e.eggArr.map(function(t,e){t.num1=0,t.num2=0,t.num3=0,t.str="1_0_0"})})}else 1==e.eggArr[0].finsh&&1==e.eggArr[1].finsh&&1==e.eggArr[2].finsh&&(e.shaw_button.texture=e.shaw_button.downed,e.shaw_button.interactive=!0,e.shaw_button.on("pointerdown",function(){console.log("鸡蛋下落"),_.TweenLite.to(e.zbContainer,.3,{x:566}),e.shaw_button.visible=!1,res.audio_down.sound.play(),e.eggArr.map(function(t,a){_.TweenLite.to(t,1,{y:1920,onComplete:function(){e.gameBg.children[0].texture=e.gameBg.checked,e.gameBg.texture=e.gameBg.checked,e.speedDown(t)}})})}));break;case 2:var o=e.eggArr[e.egg_index].str;if(e.comContainerArr[e.egg_index].alpha=0,"case"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(o,0,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num1=1),"goods"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(o,2,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num2=1),"flight"==e.currentTarget.key&&(e.eggArr[e.egg_index].str=e.replaceChat(o,4,e.currentTarget.value),e.setSkinName(e.eggArr[e.egg_index],e.eggArr[e.egg_index].str),e.eggArr[e.egg_index].num3=1),1==e.eggArr[e.egg_index].num1&&1==e.eggArr[e.egg_index].num2&&1==e.eggArr[e.egg_index].num3)if(console.log("3333,首次装备完成"),e.eggArr[e.egg_index].finsh=!0,1==e.guideLayer.visible){e.guideText.setText(e.guideTextCont.text2),e.guideBg.width=800;var r=e.rightResult[Math.floor(Math.random()*e.rightResult.length)],l=e.rightResult[Math.floor(Math.random()*e.rightResult.length)];e.setSkinName(e.eggArr[0],r),e.setSkinName(e.eggArr[1],l),e.button.visible=!0,e.button.interactive=!0,e.button.on("pointerdown",function(){e.guideLayer.visible=!1,e.setSkinName(e.eggArr[0],"1_0_0"),e.setSkinName(e.eggArr[1],"1_0_0"),e.setSkinName(e.eggArr[2],"1_0_0"),e.eggArr.map(function(t,e){t.num1=0,t.num2=0,t.num3=0,t.str="1_0_0"})})}else 1==e.eggArr[0].finsh&&1==e.eggArr[1].finsh&&1==e.eggArr[2].finsh&&(e.shaw_button.texture=e.shaw_button.downed,e.shaw_button.interactive=!0,e.shaw_button.on("pointerdown",function(){console.log("鸡蛋下落"),_.TweenLite.to(e.zbContainer,.3,{x:566}),e.shaw_button.visible=!1,res.audio_down.sound.play(),e.eggArr.map(function(t,a){_.TweenLite.to(t,1,{y:1920,onComplete:function(){e.gameBg.children[0].texture=e.gameBg.checked,e.speedDown(t)}})})}))}1==e.guideLayer.visible&&(1==e.eggArr[e.egg_index].num1&&0==e.eggArr[e.egg_index].num2&&0==e.eggArr[e.egg_index].num3&&(e.mouseStyleAn2.alpha=1,e.mouseStyleAn2.visible=!0,e.pixiStage.setChildIndex(e.mouseStyleAn2,e.pixiStage.children.length-2),e.zbContainer.children[2].on("pointerover",e.overAndScale.bind(this)),e.zbContainer.children[2].on("pointerout",e.outAndScale.bind(this)),e.zbContainer.children[2].on("pointerdown",e.getCurrentTarget.bind(this))),1==e.eggArr[e.egg_index].num1&&1==e.eggArr[e.egg_index].num2&&0==e.eggArr[e.egg_index].num3&&(e.mouseStyleAn3.alpha=1,e.mouseStyleAn3.visible=!0,e.pixiStage.setChildIndex(e.mouseStyleAn3,e.pixiStage.children.length-2),console.log(e.zbContainer),e.zbContainer.children[4].on("pointerover",e.overAndScale.bind(this)),e.zbContainer.children[4].on("pointerout",e.outAndScale.bind(this)),e.zbContainer.children[4].on("pointerdown",e.getCurrentTarget.bind(this)))),e.zbContainer.removeChild(e.currentTarget),e.currentTarget=null}else console.log("没碰到======"),null!=e.currentTarget&&_.TweenLite.to(e.currentTarget,.5,{x:e.currentTarget.startX,y:e.currentTarget.startY,onComplete:function(){e.zbContainer.removeChild(e.currentTarget),e.complete=!0,e.currentTarget=null}});this.tip||(console.log("绑定其他元素"),e.getEvents()),e.mouseStyle.texture=e.mouseStyle.default,e.dragging=!1,e.touched=!1}}},{key:"getEvents",value:function(){var t=this,e=this;e.zbContainer.children.map(function(a,i){a.on("pointerover",e.overAndScale.bind(t)),a.on("pointerout",e.outAndScale.bind(t)),a.on("pointerdown",e.getCurrentTarget.bind(t))})}},{key:"copySprit",value:function(){var t=new PIXI.Sprite.fromImage(res[this.currentTarget.name].url);t.name=this.currentTarget.name,t.key=this.currentTarget.key,t.value=this.currentTarget.value,t.startX=this.currentTarget.startX,t.startY=this.currentTarget.startY,t.interactive=!0,t.anchor.set(.5,.5),t.startWidth=this.currentTarget.startWidth,t.startHeight=this.currentTarget.startHeight,t.x=this.currentTarget.startX,t.y=this.currentTarget.startY,this.zbContainer.addChild(t),this.zbContainer.setChildIndex(this.currentTarget,this.zbContainer.children.length-1)}},{key:"replaceChat",value:function(t,e,a){if(e<0||e>=t.length||0==t.length)return"invalid parameters...";t.length;return t.substr(0,e)+a+t.substr(e+1,t.length)}},{key:"speedDown",value:function(t){var e=this;"2_1_1"!=t.str&&"2_2_1"!=t.str||_.TweenLite.fromTo(t,5,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"3_2_1"!=t.str&&"3_1_1"!=t.str||_.TweenLite.fromTo(t,4,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"2_2_3"!=t.str&&"2_1_3"!=t.str||_.TweenLite.fromTo(t,3.5,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"2_3_1"==t.str&&_.TweenLite.fromTo(t,3.3,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"3_3_1"==t.str&&_.TweenLite.fromTo(t,3.2,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"3_2_3"!=t.str&&"3_1_3"!=t.str||_.TweenLite.fromTo(t,3,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"2_3_3"==t.str&&_.TweenLite.fromTo(t,2.5,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"3_3_3"==t.str&&_.TweenLite.fromTo(t,2.2,{y:0},{y:800,onComplete:function(){res.audio_luodi.sound.play(),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}}),"2_1_2"!=t.str&&"2_3_2"!=t.str&&"2_2_2"!=t.str&&"3_1_2"!=t.str&&"3_3_2"!=t.str&&"3_2_2"!=t.str||_.TweenLite.fromTo(t,2,{y:0},{y:800,onComplete:function(){res.audio_th.sound.play(),t.state.setAnimation(1,"animation02",!1),e.setSkinName(t,t.str),t.goned=!0,1==e.eggArr[0].goned&&1==e.eggArr[1].goned&&1==e.eggArr[2].goned&&(console.log("下落完毕"),e.eggArr.map(function(t,a){e.makeShow(t)}),setTimeout(function(){console.log("重新玩",e.shadow),e.shadow.removeChildren(),e.shadow.addChild(e.shadow.shadow_lay),e.shadow.visible=!1,e.init()},4e3))}})}},{key:"makeShow",value:function(t){var e=this;if("2_3_2"==t.str||"2_2_2"==t.str||"3_1_2"==t.str||"3_1_3"==t.str||"3_3_1"==t.str||"3_3_2"==t.str||"3_3_3"==t.str||"3_2_2"==t.str||"3_2_3"==t.str){var a=new PIXI.Sprite.fromImage(res.image_bad.url);a.anchor.set(.5,.5),a.x=t.x,a.y=t.y-400,this.pixiStage.setChildIndex(this.finsh,this.pixiStage.children.length-1),setTimeout(function(){e.shadow.addChild(a),e.shadow.visible=!0,e.pixiStage.setChildIndex(e.shadow,e.pixiStage.children.length-3)},1e3)}if("2_1_1"==t.str||"2_1_3"==t.str||"2_3_1"==t.str||"2_2_1"==t.str){var i=new PIXI.Sprite.fromImage(res.image_good.url);i.anchor.set(.5,.5),i.x=t.x,i.y=t.y-400,this.pixiStage.setChildIndex(this.finsh,this.pixiStage.children.length-1),setTimeout(function(){e.shadow.addChild(i),e.shadow.visible=!0,e.pixiStage.setChildIndex(e.shadow,e.pixiStage.children.length-3)},1e3)}if("2_1_2"==t.str||"2_3_3"==t.str||"2_2_3"==t.str||"3_2_1"==t.str||"3_1_1"==t.str){var n=["image_litter1","image_litter2","image_litter3"],s=n[Math.floor(Math.random()*n.length)],o=new PIXI.Sprite.fromImage(res[s].url);o.anchor.set(.5,.5),o.x=t.x,o.y=t.y-400,this.pixiStage.setChildIndex(this.finsh,this.pixiStage.children.length-1),setTimeout(function(){e.shadow.addChild(o),e.shadow.visible=!0,e.pixiStage.setChildIndex(e.shadow,e.pixiStage.children.length-3)},1e3)}}},{key:"init",value:function(){var t=this;console.log("dddd",t.eggArr),t.eggArr.map(function(e,a){e.str="1_0_0",e.state.setAnimation(1,"animation01",!1),t.setSkinName(e,"1_0_0"),e.x=e.startX,e.y=e.startY,e.num1=0,e.num2=0,e.num3=0,e.finsh=!1,e.goned=!1}),t.gameBg.children[0].texture=t.gameBg.default,_.TweenLite.to(t.zbContainer,.3,{x:0}),t.shaw_button.interactive=!1,t.shaw_button.texture=t.shaw_button.default,t.shaw_button.visible=!0,t.getEvents()}}]),t}());PIXI.spine.core.Skeleton.prototype.setSkin1=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,a=0,i=e.length;a<i;a++){var n=e[a],s=n.data.attachmentName;if(null!=s){var o=t.getAttachment(a,s);null!=o?n.setAttachment(o):n.setAttachment(null)}}this.skin=t},PIXI.spine.core.Skeleton.prototype.setSkinByName1=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin1(e)};a("cdCw");var y=void 0,S={name:"start",methods:{createApp:function(){return new n.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},components:{},data:function(){return{isShow:!1}},created:function(){document.getElementsByClassName("page-loading")[0].style.display="block"},destroyed:function(){PIXI.sound.stopAll(),app.destroy()},mounted:function(){PIXI.sound.stopAll(),window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",window.stage=app.stage;var t=this;t.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object(u.load)().then(function(e){console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),window.question=e.question.data,y=e.question.data,store.state.testNum=y.sources.length;var a=new p.AnswerInfo;Object(p.Loading)(),a.answerDefault({type:0,useranswer:""}),Object(p.Question)({id:"0",currentTotalOption:"1"});var i=new h.a(y.one.start,e);(Object(m.RenderAllData)(!1,y),t.$store.state.pageNumber=parseInt(t.$route.query.id)?parseInt(t.$route.query.id):0,Object(m.RenderPageByIndex)(t.$store.state.pageNumber),t.$route.query.startStatus)?window.question.one.start.show&&"true"==t.$route.query.startStatus?(stage.addChild(i),i.button(function(){stage.removeChild(i),stage.getChildByName("gameBgSound")&&stage.setChildIndex(stage.getChildByName("gameBgSound"),stage.children.length-1),(new x).exec()})):(new x).exec():window.question.one.start.show?(stage.addChild(i),i.button(function(){stage.removeChild(i),stage.getChildByName("gameBgSound")&&stage.setChildIndex(stage.getChildByName("gameBgSound"),stage.children.length-1),(new x).exec()})):(new x).exec()})}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png"}})])},staticRenderFns:[]};var D=a("C7Lr")(S,C,!1,function(t){a("wwml")},"data-v-cc8f2de2",null).exports,A=a("PL7O");i.default.use(g.a);var B=new g.a({routes:[{path:"/",component:D},{path:"/edit",component:A.a},{path:"/preview",component:A.b}]}),I=a("glag"),T=a.n(I),k=(a("xlLU"),a("Otmz")),N=a.n(k),$=a("CtzY"),E=a.n($);i.default.config.productionTip=!1,i.default.prototype.$http=N.a,i.default.prototype.qs=E.a,i.default.use(T.a),new i.default({el:"#app",router:B,components:{App:d},store:store,template:"<App/>"})},OBZV:function(t,e,a){"use strict";var i=a("ZLEe"),n=a.n(i),s=a("hRKE"),o=a.n(s),r=a("MgeX"),l=a.n(r),d=a("3cXf"),g=a.n(d),m=a("OFWn"),u=a.n(m),c=a("9bLE"),h={name:"EditStart",data:function(){return{lockImg:"",showStatus:!1,startData:null,publicImage:null,maskStatus:!1,label:"1",startBgStatus:!0,startBtnStatus:!0,gameBgSoundData:null,resourceData:null,tabShowStatus:{startBg:!1,startBtn:!1,gameBgAudio:!1}}},props:["allData"],methods:{setAttr:function(t,e,a){var i=t+e.substring(0,1).toUpperCase()+e.substring(1),n=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(i);if(n)if("scale"===a)n[a].set(this.startData[t][e][a]);else{if("x"===a&&this.startData[t][e][a]>1920)return void this.$message.error("输入数值超出范围 应为0-1920");if("y"===a&&this.startData[t][e][a]>1080)return void this.$message.error("输入数值超出范围 应为0-1080");0==this.startData[t][e].radio||"width"!==a&&"height"!==a?(this.startData[t][e][a]=this.startData[t][e][a]?this.startData[t][e][a]:0,n[a]=this.startData[t][e][a]):"width"===a?(this.startData[t][e].height=this.startData[t][e][a]/this.startData[t][e].radio,n.width=parseInt(this.startData[t][e].width),n.height=parseInt(this.startData[t][e].height)):"height"===a&&(this.startData[t][e].width=this.startData[t][e][a]*this.startData[t][e].radio,n.width=parseInt(this.startData[t][e].width),n.height=parseInt(this.startData[t][e].height))}},verifyAnimationFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},setBgSoundAttr:function(t){var e=window.stage.getChildByName("gameBgSound");if(console.log(t),e)if("scale"===t)e[t].set(this.gameBgSoundData[t]);else{if("x"===t&&this.gameBgSoundData[t]>1920)return void this.$message.error("输入数值超出范围 应为0-1920");if("y"===t&&this.gameBgSoundData[t]>1080)return void this.$message.error("输入数值超出范围 应为0-1080");e[t]=parseInt(this.gameBgSoundData[t])}},getJSON:function(){var t=this;this.startData=this.allData.one.start,this.gameBgSoundData=this.allData.one.gameBgSound,this.getResourceData(function(){t.showStatus=!0,t.startData.startBtn.image.show?t.label="1":t.startData.startBtn.animate.show?t.label="2":t.startData.startBtn.sprite.show?t.label="3":t.label="1"})},setResource:function(t,e){if(this.startData[t][e].show){var a=t+e.substring(0,1).toUpperCase()+e.substring(1),i=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(a);i&&(i.visible=!0)}else{this.startData[t][e].name="",this.startData[t][e].width&&(this.startData[t][e].width=0),this.startData[t][e].height&&(this.startData[t][e].height=0),this.startData[t][e].x&&(this.startData[t][e].x=0),this.startData[t][e].y&&(this.startData[t][e].y=0),this.startData[t][e].scale&&(this.startData[t][e].scale=1);var n=t+e.substring(0,1).toUpperCase()+e.substring(1),s=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(n),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");s&&o.removeChild(s)}},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,e.lockImg=e.resourceData.image_lock_off,t&&t()})},startBtn:function(t){l()(this.startData.startBtn).forEach(function(t){t.show=!1,t.name="",t.x&&(t.x=0),t.y&&(t.y=0),t.width&&(t.width=0),t.height&&(t.height=0),t.scale&&(t.scale=1)}),window.stage.getChildByName("START").children[0].getChildByName("startBtnContainer").removeChildren(),this.startData.startBtn[t].show=!0},setbgAudioStatus:function(){this.gameBgSoundData.show?this.tabShowStatus.gameBgAudio=!0:(window.stage.getChildByName("gameBgSound")&&window.stage.removeChild(window.stage.getChildByName("gameBgSound")),this.gameBgSoundData.audio="",this.gameBgSoundData.animate_name="",this.gameBgSoundData.x=0,this.gameBgSoundData.y=0,this.tabShowStatus.gameBgAudio=!1)},tabShow:function(t,e){var a=this,i=this.$refs[e];this.tabShowStatus[t]?(this.tabShowStatus[t]=!1,i.className="el-icon-arrow-right"):(n()(this.tabShowStatus).forEach(function(t,e){a.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0,i.className="el-icon-arrow-down",this.gameBgSoundData.show||(this.tabShowStatus.gameBgAudio=!1,i.className="el-icon-arrow-right"))},uploadImage:function(t,e,a){var i=this,n=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(n)?0!==a.target.files.length?this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){i.startData[t][e].name=n.resourceName,i.getResourceData();var s=t+e.substring(0,1).toUpperCase()+e.substring(1),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(s),r=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");o?(o.texture=new c.Texture.fromImage(n.path),"startBg"!==t&&new u.a(o,function(a,n){i.startData[t][e].x=a.toFixed(1),i.startData[t][e].y=n.toFixed(1)}),i.startData[t][e].show?o.visible=!0:o.visible=!1):((o=new c.Sprite.fromImage(n.path)).name=s,o.x=0,o.y=0,r.addChild(o),"startBg"!==t&&new u.a(o,function(a,n){i.startData[t][e].x=a.toFixed(1),i.startData[t][e].y=n.toFixed(1)}),i.startData[t][e].show?o.visible=!0:o.visible=!1),"startBg"!==t&&(i.startData[t][e].width=n.width,i.startData[t][e].height=n.height,i.startData[t][e].x?i.startData[t][e].x=i.startData[t][e].x:i.startData[t][e].x=0,i.startData[t][e].y?i.startData[t][e].y=i.startData[t][e].y:i.startData[t][e].y=0),o.width=n.width,o.height=n.height,a.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},verifySpriteFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},uploadAnimation:function(t,e){var a=this;if(0!==e.target.files.length&&3===e.target.files.length)if(this.verifyAnimationFiles(e.target.files)){var i={};l()(e.target.files).forEach(function(t,e){i["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){if(console.log(i.path),e.target.value="","gameBgAudio"===t){a.gameBgSoundData.animate_name=i.resourceName,a.gameBgSoundData.scale=1;var n=window.stage,s=void 0;if(window.stage.getChildByName("gameBgSound")){var o=(s=window.stage.getChildByName("gameBgSound")).x,r=s.y;n.removeChild(s);var l=(new Date).getTime();PIXI.loader.add("animation"+l,i.path),PIXI.loader.load(function(t,e){(s=new PIXI.spine.Spine(e["animation"+l].spineData)).x=o,s.y=r,s.name="gameBgSound",s.state.setAnimation(1,"animation",!0),n.addChild(s),n.setChildIndex(s,n.children.length-1),new u.a(s,function(t,e){a.gameBgSoundData.x=t.toFixed(1),a.gameBgSoundData.y=e.toFixed(1)})}),a.allData.one.gameBgSound.show&&a.allData.one.gameBgSound.audio?s&&(s.visible=!0):s&&(s.visible=!1)}else{a.gameBgSoundData.x=0,a.gameBgSoundData.y=0;var d=(new Date).getTime();PIXI.loader.add("animation"+d,i.path),PIXI.loader.load(function(t,e){(s=new PIXI.spine.Spine(e["animation"+d].spineData)).name="gameBgSound",s.x=0,s.y=0,s.state.setAnimation(1,"animation",!0),n.addChild(s),n.setChildIndex(s,n.children.length-1),new u.a(s,function(t,e){a.gameBgSoundData.x=t.toFixed(1),a.gameBgSoundData.y=e.toFixed(1)}),a.allData.one.gameBgSound.show&&a.allData.one.gameBgSound.audio?s&&(s.visible=!0):s&&(s.visible=!1)})}}else{a.startData[t].animate.name=i.resourceName;var g=t+"Animate",m=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(g),c=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(m){var h=m.x,p=m.y;c.removeChild(m);var v=(new Date).getTime();PIXI.loader.add("animation"+v,i.path),PIXI.loader.load(function(e,i){(m=new PIXI.spine.Spine(i["animation"+v].spineData)).x=h,m.y=p,m.scale.set(a.startData[t].animate.scale),m.name=g,m.state.setAnimation(1,"animation",!0),c.addChild(m),new u.a(m,function(e,i){a.startData[t].animate.x=e.toFixed(1),a.startData[t].animate.y=i.toFixed(1)}),a.startData[t].animate.show?m&&(m.visible=!0):m&&(m.visible=!1)})}else{a.startData[t].animate.x=0,a.startData[t].animate.y=0;var f=(new Date).getTime();PIXI.loader.add("animation"+f,i.path),PIXI.loader.load(function(e,i){(m=new PIXI.spine.Spine(i["animation"+f].spineData)).x=0,m.y=0,m.scale.set(a.startData[t].animate.scale),m.name=g,m.state.setAnimation(1,"animation",!0),c.addChild(m),new u.a(m,function(e,i){a.startData[t].animate.x=e.toFixed(1),a.startData[t].animate.y=i.toFixed(1)}),a.startData[t].animate.show?m&&(m.visible=!0):m&&(m.visible=!1)})}}})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadSprite:function(t,e){var a=this;if(0!==e.target.files.length&&2===e.target.files.length)if(this.verifySpriteFiles(e.target.files)){var i={};l()(e.target.files).forEach(function(t,e){i["sprite"+(e+1)]=t}),console.log(i),this.$http.post("/uploadingSprite",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){e.target.value="";a.startData[t].sprite.name=i.resourceName;var n=t+"Sprite",s=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(n),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(s){var r=s.x,l=s.y;o.removeChild(s);var d=(new Date).getTime();console.log(d),PIXI.loader.add("sprite"+d,i.path),PIXI.loader.load(function(e,i){var g=i["sprite"+d].spritesheet,m=[];for(var c in g.textures)m.push(g.textures[c]);(s=new PIXI.extras.AnimatedSprite(m)).x=r,s.y=l,s.scale.set(a.startData[t].sprite.scale),s.animationSpeed=1,s.play(),s.name=n,o.addChild(s),new u.a(s,function(e,i){a.startData[t].sprite.x=e.toFixed(1),a.startData[t].sprite.y=i.toFixed(1)}),a.startData[t].sprite.show?s&&(s.visible=!0):s&&(s.visible=!1)})}else{a.startData[t].sprite.x=0,a.startData[t].sprite.y=0;var g=(new Date).getTime();PIXI.loader.add("sprite"+g,i.path),PIXI.loader.load(function(e,i){var r=i["sprite"+g].spritesheet,l=[];for(var d in r.textures)l.push(r.textures[d]);(s=new PIXI.extras.AnimatedSprite(l)).x=0,s.y=0,s.scale.set(a.startData[t].sprite.scale),s.animationSpeed=1,s.play(),s.name=n,o.addChild(s),new u.a(s,function(e,i){a.startData[t].sprite.x=e.toFixed(1),a.startData[t].sprite.y=i.toFixed(1)}),a.startData[t].sprite.show?s&&(s.visible=!0):s&&(s.visible=!1)})}})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadAudio:function(t){var e=this,a=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(a)?0!==t.target.files.length?this.$http.post("/uploadingAudio",{audio:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){t.target.value="",e.gameBgSoundData.audio=a.resourceName;var i=stage.getChildByName("gameBgSound");e.allData.one.gameBgSound.show&&e.allData.one.gameBgSound.animate_name?i&&(i.visible=!0):i&&(i.visible=!1)}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},showBigImage:function(t){this.maskStatus=!0,this.publicImage=t.target.src},controlStartPage:function(t){var e=stage.getChildByName("gameBgSound"),a=stage.getChildByName("START");t?(e&&(e.visible=!0),a&&(a.visible=!0)):(e&&(e.visible=!1),a&&(a.visible=!1))},lockStatusData:function(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(this.lockImg=this.resourceData.image_lock_off,e.currentTarget.setAttribute("data-lock","false"),t.image.radio=0):(this.lockImg=this.resourceData.image_lock_on,e.currentTarget.setAttribute("data-lock","true"),t.image.radio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})}},mounted:function(){this.getJSON(),this.controlStartPage(this.startData.show)}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"start"},[a("el-switch",{staticStyle:{"margin-left":"15px"},attrs:{"active-color":"#77DC04","active-text":"是否应用","inactive-color":"#ff4949"},on:{change:function(e){return t.controlStartPage(t.startData.show)}},model:{value:t.startData.show,callback:function(e){t.$set(t.startData,"show",e)},expression:"startData.show"}}),t._v(" "),t.startData.show?a("div",{staticStyle:{"margin-top":"8px"}},[a("div",{staticClass:"start-title"},[a("i",{ref:"startBgTitle",class:t.tabShowStatus.startBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}},[t._v("\n                背景图\n            ")])]),t._v(" "),t.tabShowStatus.startBg?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","image")}},model:{value:t.startData.startBg.image.show,callback:function(e){t.$set(t.startData.startBg.image,"show",e)},expression:"startData.startBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBg.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBg","image",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","sprite")}},model:{value:t.startData.startBg.sprite.show,callback:function(e){t.$set(t.startData.startBg.sprite,"show",e)},expression:"startData.startBg.sprite.show"}},[t._v("精灵序列图")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                    精灵文件：\n                ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","sprite","x")}},model:{value:t.startData.startBg.sprite.x,callback:function(e){t.$set(t.startData.startBg.sprite,"x",e)},expression:"startData.startBg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","sprite","y")}},model:{value:t.startData.startBg.sprite.y,callback:function(e){t.$set(t.startData.startBg.sprite,"y",e)},expression:"startData.startBg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","sprite","scale")}},model:{value:t.startData.startBg.sprite.scale,callback:function(e){t.$set(t.startData.startBg.sprite,"scale",e)},expression:"startData.startBg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.sprite.loop,callback:function(e){t.$set(t.startData.startBg.sprite,"loop",e)},expression:"startData.startBg.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","animate")}},model:{value:t.startData.startBg.animate.show,callback:function(e){t.$set(t.startData.startBg.animate,"show",e)},expression:"startData.startBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","animate","x")}},model:{value:t.startData.startBg.animate.x,callback:function(e){t.$set(t.startData.startBg.animate,"x",e)},expression:"startData.startBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","animate","y")}},model:{value:t.startData.startBg.animate.y,callback:function(e){t.$set(t.startData.startBg.animate,"y",e)},expression:"startData.startBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBg","animate","scale")}},model:{value:t.startData.startBg.animate.scale,callback:function(e){t.$set(t.startData.startBg.animate,"scale",e)},expression:"startData.startBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.animate.loop,callback:function(e){t.$set(t.startData.startBg.animate,"loop",e)},expression:"startData.startBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"startBtnTitle",class:t.tabShowStatus.startBtn?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}},[t._v("\n                开始按钮\n            ")])]),t._v(" "),t.tabShowStatus.startBtn?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-radio-title"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.startBtn("image")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("图片")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.startBtn("animate")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("动画")]),t._v(" "),a("el-radio",{attrs:{label:"3"},on:{change:function(e){return t.startBtn("sprite")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("精灵序列")])],1),t._v(" "),"1"===t.label?a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBtn.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBtn","image",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","image","x")}},model:{value:t.startData.startBtn.image.x,callback:function(e){t.$set(t.startData.startBtn.image,"x",e)},expression:"startData.startBtn.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","image","y")}},model:{value:t.startData.startBtn.image.y,callback:function(e){t.$set(t.startData.startBtn.image,"y",e)},expression:"startData.startBtn.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","image","width")}},model:{value:t.startData.startBtn.image.width,callback:function(e){t.$set(t.startData.startBtn.image,"width",e)},expression:"startData.startBtn.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.startData.startBtn.image.radio}},[a("img",{attrs:{src:t.lockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.startData.startBtn,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","image","height")}},model:{value:t.startData.startBtn.image.height,callback:function(e){t.$set(t.startData.startBtn.image,"height",e)},expression:"startData.startBtn.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1):t._e(),t._v(" "),"2"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","animate","x")}},model:{value:t.startData.startBtn.animate.x,callback:function(e){t.$set(t.startData.startBtn.animate,"x",e)},expression:"startData.startBtn.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","animate","y")}},model:{value:t.startData.startBtn.animate.y,callback:function(e){t.$set(t.startData.startBtn.animate,"y",e)},expression:"startData.startBtn.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","animate","scale")}},model:{value:t.startData.startBtn.animate.scale,callback:function(e){t.$set(t.startData.startBtn.animate,"scale",e)},expression:"startData.startBtn.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.animate.loop,callback:function(e){t.$set(t.startData.startBtn.animate,"loop",e)},expression:"startData.startBtn.animate.loop"}})],1)],1):t._e(),t._v(" "),"3"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                        精灵文件：\n                    ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","sprite","x")}},model:{value:t.startData.startBtn.sprite.x,callback:function(e){t.$set(t.startData.startBtn.sprite,"x",e)},expression:"startData.startBtn.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","sprite","y")}},model:{value:t.startData.startBtn.sprite.y,callback:function(e){t.$set(t.startData.startBtn.sprite,"y",e)},expression:"startData.startBtn.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("startBtn","sprite","scale")}},model:{value:t.startData.startBtn.sprite.scale,callback:function(e){t.$set(t.startData.startBtn.sprite,"scale",e)},expression:"startData.startBtn.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.sprite.loop,callback:function(e){t.$set(t.startData.startBtn.sprite,"loop",e)},expression:"startData.startBtn.sprite.loop"}})],1)],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"gameBgAudioTitle",class:t.tabShowStatus.gameBgAudio?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}},[t._v("\n                背景音乐\n            ")]),t._v(" "),a("el-switch",{staticClass:"edit-title-switch",attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{change:function(e){return t.setbgAudioStatus()}},model:{value:t.gameBgSoundData.show,callback:function(e){t.$set(t.gameBgSoundData,"show",e)},expression:"gameBgSoundData.show"}})],1),t._v(" "),t.tabShowStatus.gameBgAudio&&!0===t.gameBgSoundData.show?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"bg-audio-title"},[t._v("\n                音频\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.gameBgSoundData.audioVolume,callback:function(e){t.$set(t.gameBgSoundData,"audioVolume",e)},expression:"gameBgSoundData.audioVolume"}})],1),t._v(" "),a("div",{staticClass:"edit-switch-audio"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.gameBgSoundData.loop,callback:function(e){t.$set(t.gameBgSoundData,"loop",e)},expression:"gameBgSoundData.loop"}})],1)]),t._v(" "),a("div",{staticClass:"bg-audio-title"},[t._v("\n                图标动画\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("gameBgAudio",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("x")}},model:{value:t.gameBgSoundData.x,callback:function(e){t.$set(t.gameBgSoundData,"x",e)},expression:"gameBgSoundData.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("y")}},model:{value:t.gameBgSoundData.y,callback:function(e){t.$set(t.gameBgSoundData,"y",e)},expression:"gameBgSoundData.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("scale")}},model:{value:t.gameBgSoundData.scale,callback:function(e){t.$set(t.gameBgSoundData,"scale",e)},expression:"gameBgSoundData.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2)],1)]):t._e()]):t._e(),t._v(" "),t.maskStatus?a("div",{staticClass:"mask",on:{click:function(e){t.maskStatus=!1}}},[a("img",{attrs:{src:t.publicImage,alt:""}})]):t._e()],1):t._e()},staticRenderFns:[]};var v=a("C7Lr")(h,p,!1,function(t){a("aNKv")},"data-v-cf09cbfc",null).exports,f={name:"EditGamePublic",data:function(){return{lockImg:this.resourceData.image_lock_off,fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],textAlign:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"},{label:"居中对齐",value:"center"},{label:"两端对齐",value:"justify"}]}},props:["allData","gameData","resourceData","tabShowStatus","item","index"],methods:{setSubTitileAttr:function(t,e){var a="";a="soundImg"===t?"stemSound":"stemText";var i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName(a);if(i){if("x"===e&&this.item.subTitle[t][e]>1920)return void this.$message.error("输入数值超出范围 应为0-1920");if("y"===e&this.item.subTitle[t][e]>1080)return void this.$message.error("输入数值超出范围 应为0-1080");i[e]=this.item.subTitle[t][e]}},setStemTextStatus:function(t){var e=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");e&&(e.visible=!!t)},setStemText:function(t){var e=this,a=this.item.subTitle,i=window.stage.getChildByName("GAME"),n=i.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");a.stem.fontSize=0!=a.stem.fontSize?a.stem.fontSize>120?120:a.stem.fontSize:60,a.stem.lineHeight=0!=a.stem.lineHeight?a.stem.lineHeight:0,a.stem.letterSpacing=0!=a.stem.letterSpacing?a.stem.letterSpacing:0,a.stem.color=a.stem.color?a.stem.color:"#000";var s=new PIXI.TextStyle({fontFamily:a.stem.fontFamily,fontSize:parseInt(a.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(a.stem.width),breakWords:!0,lineHeight:parseInt(a.stem.lineHeight),letterSpacing:parseInt(a.stem.letterSpacing),align:a.stem.textAlign,fill:a.stem.color,width:a.stem.width,fontWeight:a.stem.strong?"bold":"",fontStyle:a.stem.italic?"italic":""});if(n){if("text"===t)return void n.setText(a.stem.text);n.setStyle(s)}else{var o=new c.Text(a.stem.text,s);new u.a(o,function(t,a){e.item.subTitle.stem.x=t.toFixed(1),e.item.subTitle.stem.y=a.toFixed(1)}),o.name="stemText",console.log(o),i.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].addChild(o),a.stem.show?o.visible=!0:o.visible=!1}console.log(t,this.item.subTitle.stem[t])},setAttr:function(t,e,a,i){var n="",s=(n="bgImage"===e?"gameBg":"stem")+a.substring(0,1).toUpperCase()+a.substring(1),o=window.stage.getChildByName("GAME").getChildByName("GAME"+t).children[0].getChildByName(n+"Container").getChildByName(s);if(o)if("scale"===i)o[i].set(this.gameData[t][e][a][i]);else{if("x"===i&&this.gameData[t][e][a][i]>1920)return void this.$message.error("输入数值超出范围 应为0-1920");if("y"===i&this.gameData[t][e][a][i]>1080)return void this.$message.error("输入数值超出范围 应为0-1080");0==this.gameData[t][e][a].radio||"width"!==i&&"height"!==i?o[i]=parseInt(this.gameData[t][e][a][i]):"width"===i?(this.gameData[t][e][a].height=this.gameData[t][e][a][i]/this.gameData[t][e][a].radio,o.width=parseInt(this.gameData[t][e][a].width),o.height=parseInt(this.gameData[t][e][a].height)):"height"===i&&(this.gameData[t][e][a].width=this.gameData[t][e][a][i]*this.gameData[t][e][a].radio,o.width=parseInt(this.gameData[t][e][a].width),o.height=parseInt(this.gameData[t][e][a].height))}},setResource:function(t,e,a){if("subTitle"===e)if(this.gameData[t][e].audioShow){"bgImage"===e?"gameBg":"stem";var i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");i&&this.gameData[t][e].audio&&(i.visible=!0)}else{this.gameData[t][e].audio="",this.gameData[t][e].soundImg.animate_name="",this.gameData[t][e].soundImg.x&&(this.gameData[t][e].soundImg.x=0),this.gameData[t][e].soundImg.y&&(this.gameData[t][e].soundImg.y=0),this.gameData[t][e].soundImg.width&&(this.gameData[t][e].soundImg.width=0),this.gameData[t][e].soundImg.height&&(this.gameData[t][e].soundImg.height=0),this.gameData[t][e].soundImg.scale&&(this.gameData[t][e].soundImg.scale=1);var n=window.stage.getChildByName("GAME"),s=n.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0],o=n.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");o&&s.removeChild(o)}else if(this.gameData[t][e][a].show){var r="";r="bgImage"===e?"gameBg":"stem";var l=window.stage.getChildByName("GAME"),d=r+a.substring(0,1).toUpperCase()+a.substring(1),g=l.getChildByName("GAME"+t).children[0].getChildByName(r+"Container").getChildByName(d);g&&(g.visible=!0)}else{this.gameData[t][e][a].name="",this.gameData[t][e][a].x&&(this.gameData[t][e][a].x=0),this.gameData[t][e][a].y&&(this.gameData[t][e][a].y=0),this.gameData[t][e][a].width&&(this.gameData[t][e][a].width=0),this.gameData[t][e][a].height&&(this.gameData[t][e][a].height=0),this.gameData[t][e][a].scale&&(this.gameData[t][e][a].scale=1);var m="";m="bgImage"===e?"gameBg":"stem";var u=window.stage.getChildByName("GAME"),c=m+a.substring(0,1).toUpperCase()+a.substring(1),h=u.getChildByName("GAME"+t).children[0].getChildByName(m+"Container").getChildByName(c),p=u.getChildByName("GAME"+t).children[0].getChildByName(m+"Container");h&&p.removeChild(h)}},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,i.className="el-icon-arrow-right"):(n()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),this.tabShowStatus[t].child[e]=!0,i.className="el-icon-arrow-down")},setGoldTextFontStyle:function(t,e){this.gameData[e].subTitle.stem[t]=!this.gameData[e].subTitle.stem[t];var a=this.item.subTitle,i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");if(i){var n=new PIXI.TextStyle({fontFamily:a.stem.fontFamily,fontSize:parseInt(a.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(a.stem.width),breakWords:!0,lineHeight:parseInt(a.stem.lineHeight),letterSpacing:parseInt(a.stem.letterSpacing),align:a.stem.textAlign,fill:a.stem.color,width:a.stem.width,fontWeight:a.stem.strong?"bold":"",fontStyle:a.stem.italic?"italic":""});i.setStyle(n)}},uploadImage:function(t,e,a){var i=this,n=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(n)?0!==a.target.files.length?this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){i.gameData[t][e].image.name=n.resourceName,i.updateResourceData();var s="";s="bgImage"===e?"gameBg":"stem";var o=window.stage.getChildByName("GAME"),r=s+"Image".substring(0,1).toUpperCase()+"Image".substring(1),l=o.getChildByName("GAME"+t).children[0].getChildByName(s+"Container").getChildByName(r),d=o.getChildByName("GAME"+t).children[0].getChildByName(s+"Container");l?(l.texture=new c.Texture.fromImage(n.path),l.width=n.width,l.height=n.height,"bgImage"!==e&&new u.a(l,function(a,n){i.gameData[t][e].image.x=a.toFixed(1),i.gameData[t][e].image.y=n.toFixed(1)}),i.gameData[t][e].image.show?l.visible=!0:l.visible=!1):(i.gameData[t][e].image.x=0,i.gameData[t][e].image.y=0,(l=new c.Sprite.fromImage(n.path)).name=r,l.x=0,l.y=0,l.width=n.width,l.height=n.height,d.addChild(l),"bgImage"!==e&&new u.a(l,function(a,n){i.gameData[t][e].image.x=a.toFixed(1),i.gameData[t][e].image.y=n.toFixed(1)}),i.gameData[t][e].image.show?l.visible=!0:l.visible=!1),"bgImage"!==e&&(i.gameData[t][e].image.width=n.width,i.gameData[t][e].image.height=n.height),a.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},verifySpriteFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},uploadSprite:function(t,e,a){var i=this;if(0!==a.target.files.length&&2===a.target.files.length)if(this.verifySpriteFiles(a.target.files)){var n={};l()(a.target.files).forEach(function(t,e){n["sprite"+(e+1)]=t}),console.log(n),this.$http.post("/uploadingSprite",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){a.target.value="",i.gameData[t][e].sprite.name=n.resourceName;var s="",o=(s="bgImage"===e?"gameBg":"stem")+"Sprite",r=window.stage.getChildByName("GAME"),l=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container").getChildByName(o),d=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container");if(console.log(d),l){var g=l.x,m=l.y;d.removeChild(l);var c=(new Date).getTime();console.log(c),PIXI.loader.add("sprite"+c,n.path),PIXI.loader.load(function(a,n){var s=n["sprite"+c].spritesheet,r=[];for(var h in s.textures)r.push(s.textures[h]);(l=new PIXI.extras.AnimatedSprite(r)).x=g,l.y=m,l.scale.set(i.gameData[t][e].sprite.scale),l.animationSpeed=1,l.play(),l.name=o,d.addChild(l),new u.a(l,function(a,n){i.gameData[t][e].sprite.x=a.toFixed(1),i.gameData[t][e].sprite.y=n.toFixed(1)}),i.gameData[t][e].sprite.show?l.visible=!0:l.visible=!1})}else{i.gameData[t][e].sprite.x=0,i.gameData[t][e].sprite.y=0;var h=(new Date).getTime();PIXI.loader.add("sprite"+h,n.path),PIXI.loader.load(function(a,n){var s=n["sprite"+h].spritesheet,r=[];for(var g in s.textures)r.push(s.textures[g]);(l=new PIXI.extras.AnimatedSprite(r)).x=0,l.y=0,l.scale.set(i.gameData[t][e].sprite.scale),l.animationSpeed=1,l.play(),l.name=o,d.addChild(l),new u.a(l,function(a,n){i.gameData[t][e].sprite.x=a.toFixed(1),i.gameData[t][e].sprite.y=n.toFixed(1)}),i.gameData[t][e].sprite.show?l.visible=!0:l.visible=!1})}})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadAudio:function(t,e){var a=this,i=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(i)?0!==e.target.files.length?this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(i){a.gameData[t].subTitle.audio=i.resourceName,e.target.value="";var n=window.stage.getChildByName("GAME").getChildByName("GAME"+a.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");a.gameData[t].subTitle.audioShow&&a.gameData[t].subTitle.soundImg.animate_name?n&&(n.visible=!0):n&&(n.visible=!1)}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},verifyAnimationFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},uploadAnimation:function(t,e,a){var i=this;if(0!==a.target.files.length&&3===a.target.files.length)if(this.verifyAnimationFiles(a.target.files)){var n={};l()(a.target.files).forEach(function(t,e){n["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(n){if(a.target.value="","soundImg"!==e){i.gameData[t][e].animate.name=n.resourceName;var s="",o=(s="bgImage"===e?"gameBg":"stem")+"Animate",r=window.stage.getChildByName("GAME"),l=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container").getChildByName(o),d=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container");if(l){var g=l.x,m=l.y;d.removeChild(l);var c=(new Date).getTime();PIXI.loader.add("animation"+c,n.path),PIXI.loader.load(function(a,n){(l=new PIXI.spine.Spine(n["animation"+c].spineData)).x=g,l.y=m,l.scale.set(i.gameData[t][e].animate.scale),l.name=o,l.state.setAnimation(1,"animation",!1),d.addChild(l),new u.a(l,function(a,n){i.gameData[t][e].animate.x=a.toFixed(1),i.gameData[t][e].animate.y=n.toFixed(1)}),i.gameData[t][e].animate.show?l.visible=!0:l.visible=!1})}else{i.gameData[t][e].animate.x=0,i.gameData[t][e].animate.y=0;var h=(new Date).getTime();PIXI.loader.add("animation"+h,n.path),PIXI.loader.load(function(a,n){(l=new PIXI.spine.Spine(n["animation"+h].spineData)).x=0,l.y=0,l.scale.set(i.gameData[t][e].animate.scale),l.name=o,l.state.setAnimation(1,"animation",!1),d.addChild(l),new u.a(l,function(a,n){i.gameData[t][e].animate.x=a.toFixed(1),i.gameData[t][e].animate.y=n.toFixed(1)}),i.gameData[t][e].animate.show?l.visible=!0:l.visible=!1})}}else{i.gameData[t].subTitle[e].animate_name=n.resourceName,i.gameData[t].subTitle.soundImg.scale=1;var p=window.stage.getChildByName("GAME"),v=p.getChildByName("GAME"+i.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound"),f=p.getChildByName("GAME"+i.index).getChildByName("STEMTITLE").children[0];if(v){var w=v.x,b=v.y;f.removeChild(v);var _=(new Date).getTime();PIXI.loader.add("animation"+_,n.path),PIXI.loader.load(function(e,a){(v=new PIXI.spine.Spine(a["animation"+_].spineData)).name="stemSound",v.state.setAnimation(1,"animation",!1),f.addChild(v),v.x=w,v.y=b,new u.a(v,function(e,a){i.gameData[t].subTitle.soundImg.x=e.toFixed(1),i.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),i.gameData[t].subTitle.audioShow&&i.gameData[t].subTitle.audio?v.visible=!0:v.visible=!1})}else{i.gameData[t].subTitle.soundImg.x=0,i.gameData[t].subTitle.soundImg.y=0;var x=(new Date).getTime();PIXI.loader.add("animation"+x,n.path),PIXI.loader.load(function(e,a){(v=new PIXI.spine.Spine(a["animation"+x].spineData)).x=0,v.y=0,v.name="stemSound",v.state.setAnimation(1,"animation",!1),f.addChild(v),new u.a(v,function(e,a){i.gameData[t].subTitle.soundImg.x=e.toFixed(1),i.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),i.gameData[t].subTitle.audioShow&&i.gameData[t].subTitle.audio?v.visible=!0:v.visible=!1})}}})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},updateResourceData:function(){this.$emit("updateResourceData")},lockStatusData:function(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(this.lockImg=this.resourceData.image_lock_off,e.currentTarget.setAttribute("data-lock","false"),t.image.radio=0):(this.lockImg=this.resourceData.image_lock_on,e.currentTarget.setAttribute("data-lock","true"),t.image.radio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title"},[a("i",{ref:"bgImageTitle",class:t.tabShowStatus[t.index].child.bgImage?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"bgImage")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"bgImage")}}},[t._v("\n        背景图\n    ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.bgImage,expression:"tabShowStatus[index].child.bgImage"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","image")}},model:{value:t.item.bgImage.image.show,callback:function(e){t.$set(t.item.bgImage.image,"show",e)},expression:"item.bgImage.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.bgImage.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"bgImage",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","sprite")}},model:{value:t.item.bgImage.sprite.show,callback:function(e){t.$set(t.item.bgImage.sprite,"show",e)},expression:"item.bgImage.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","sprite","x")}},model:{value:t.item.bgImage.sprite.x,callback:function(e){t.$set(t.item.bgImage.sprite,"x",e)},expression:"item.bgImage.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","sprite","y")}},model:{value:t.item.bgImage.sprite.y,callback:function(e){t.$set(t.item.bgImage.sprite,"y",e)},expression:"item.bgImage.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","sprite","scale")}},model:{value:t.item.bgImage.sprite.scale,callback:function(e){t.$set(t.item.bgImage.sprite,"scale",e)},expression:"item.bgImage.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.sprite.loop,callback:function(e){t.$set(t.item.bgImage.sprite,"loop",e)},expression:"item.bgImage.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","animate")}},model:{value:t.item.bgImage.animate.show,callback:function(e){t.$set(t.item.bgImage.animate,"show",e)},expression:"item.bgImage.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","animate","x")}},model:{value:t.item.bgImage.animate.x,callback:function(e){t.$set(t.item.bgImage.animate,"x",e)},expression:"item.bgImage.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","animate","y")}},model:{value:t.item.bgImage.animate.y,callback:function(e){t.$set(t.item.bgImage.animate,"y",e)},expression:"item.bgImage.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"bgImage","animate","scale")}},model:{value:t.item.bgImage.animate.scale,callback:function(e){t.$set(t.item.bgImage.animate,"scale",e)},expression:"item.bgImage.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.animate.loop,callback:function(e){t.$set(t.item.bgImage.animate,"loop",e)},expression:"item.bgImage.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"stemImgTitle",class:t.tabShowStatus[t.index].child.stemImg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"stemImg")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"stemImg")}}},[t._v("\n            题干\n        ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.stemImg,expression:"tabShowStatus[index].child.stemImg"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","image")}},model:{value:t.item.stemImg.image.show,callback:function(e){t.$set(t.item.stemImg.image,"show",e)},expression:"item.stemImg.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.stemImg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","image","x")}},model:{value:t.item.stemImg.image.x,callback:function(e){t.$set(t.item.stemImg.image,"x",e)},expression:"item.stemImg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","image","y")}},model:{value:t.item.stemImg.image.y,callback:function(e){t.$set(t.item.stemImg.image,"y",e)},expression:"item.stemImg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","image","width")}},model:{value:t.item.stemImg.image.width,callback:function(e){t.$set(t.item.stemImg.image,"width",e)},expression:"item.stemImg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.item.stemImg.image.radio}},[a("img",{attrs:{src:t.lockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.item.stemImg,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","image","height")}},model:{value:t.item.stemImg.image.height,callback:function(e){t.$set(t.item.stemImg.image,"height",e)},expression:"item.stemImg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","sprite")}},model:{value:t.item.stemImg.sprite.show,callback:function(e){t.$set(t.item.stemImg.sprite,"show",e)},expression:"item.stemImg.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","sprite","x")}},model:{value:t.item.stemImg.sprite.x,callback:function(e){t.$set(t.item.stemImg.sprite,"x",e)},expression:"item.stemImg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","sprite","y")}},model:{value:t.item.stemImg.sprite.y,callback:function(e){t.$set(t.item.stemImg.sprite,"y",e)},expression:"item.stemImg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","sprite","scale")}},model:{value:t.item.stemImg.sprite.scale,callback:function(e){t.$set(t.item.stemImg.sprite,"scale",e)},expression:"item.stemImg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.sprite.loop,callback:function(e){t.$set(t.item.stemImg.sprite,"loop",e)},expression:"item.stemImg.sprite.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","animate")}},model:{value:t.item.stemImg.animate.show,callback:function(e){t.$set(t.item.stemImg.animate,"show",e)},expression:"item.stemImg.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","animate","x")}},model:{value:t.item.stemImg.animate.x,callback:function(e){t.$set(t.item.stemImg.animate,"x",e)},expression:"item.stemImg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","animate","y")}},model:{value:t.item.stemImg.animate.y,callback:function(e){t.$set(t.item.stemImg.animate,"y",e)},expression:"item.stemImg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr(t.index,"stemImg","animate","scale")}},model:{value:t.item.stemImg.animate.scale,callback:function(e){t.$set(t.item.stemImg.animate,"scale",e)},expression:"item.stemImg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.animate.loop,callback:function(e){t.$set(t.item.stemImg.animate,"loop",e)},expression:"item.stemImg.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"subTitle","audio")}},model:{value:t.item.subTitle.audioShow,callback:function(e){t.$set(t.item.subTitle,"audioShow",e)},expression:"item.subTitle.audioShow"}},[t._v("音频\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(t.index,e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.item.subTitle.audio_volume,callback:function(e){t.$set(t.item.subTitle,"audio_volume",e)},expression:"item.subTitle.audio_volume"}})],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("图标动画")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.soundImg.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"soundImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","x")}},model:{value:t.item.subTitle.soundImg.x,callback:function(e){t.$set(t.item.subTitle.soundImg,"x",e)},expression:"item.subTitle.soundImg.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","y")}},model:{value:t.item.subTitle.soundImg.y,callback:function(e){t.$set(t.item.subTitle.soundImg,"y",e)},expression:"item.subTitle.soundImg.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setStemTextStatus(t.item.subTitle.stem.show)}},model:{value:t.item.subTitle.stem.show,callback:function(e){t.$set(t.item.subTitle.stem,"show",e)},expression:"item.subTitle.stem.show"}},[t._v("题干文字")])],1),t._v(" "),a("div",[a("div",{staticClass:"edit-textarea"},[a("span",[t._v("内容：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.subTitle.stem.text,expression:"item.subTitle.stem.text"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入文字"},domProps:{value:t.item.subTitle.stem.text},on:{input:[function(e){e.target.composing||t.$set(t.item.subTitle.stem,"text",e.target.value)},function(e){return t.setStemText("text")}]}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("width")}},model:{value:t.item.subTitle.stem.width,callback:function(e){t.$set(t.item.subTitle.stem,"width",e)},expression:"item.subTitle.stem.width"}},[a("template",{slot:"prepend"},[t._v("段落宽度：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("fontFamily")}},model:{value:t.item.subTitle.stem.fontFamily,callback:function(e){t.$set(t.item.subTitle.stem,"fontFamily",e)},expression:"item.subTitle.stem.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("fontSize")}},model:{value:t.item.subTitle.stem.fontSize,callback:function(e){t.$set(t.item.subTitle.stem,"fontSize",e)},expression:"item.subTitle.stem.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("对齐：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("textAlign")}},model:{value:t.item.subTitle.stem.textAlign,callback:function(e){t.$set(t.item.subTitle.stem,"textAlign",e)},expression:"item.subTitle.stem.textAlign"}},t._l(t.textAlign,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("letterSpacing")}},model:{value:t.item.subTitle.stem.letterSpacing,callback:function(e){t.$set(t.item.subTitle.stem,"letterSpacing",e)},expression:"item.subTitle.stem.letterSpacing"}},[a("template",{slot:"prepend"},[t._v("字间距：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("lineHeight")}},model:{value:t.item.subTitle.stem.lineHeight,callback:function(e){t.$set(t.item.subTitle.stem,"lineHeight",e)},expression:"item.subTitle.stem.lineHeight"}},[a("template",{slot:"prepend"},[t._v("行间距：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{on:{change:function(e){return t.setStemText("color")}},model:{value:t.item.subTitle.stem.color,callback:function(e){t.$set(t.item.subTitle.stem,"color",e)},expression:"item.subTitle.stem.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.item.subTitle.stem.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong",t.index)}}},[t._v("B\n            ")]),t._v(" "),a("span",{class:t.item.subTitle.stem.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic",t.index)}}},[t._v("I\n            ")])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","x")}},model:{value:t.item.subTitle.stem.x,callback:function(e){t.$set(t.item.subTitle.stem,"x",e)},expression:"item.subTitle.stem.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","y")}},model:{value:t.item.subTitle.stem.y,callback:function(e){t.$set(t.item.subTitle.stem,"y",e)},expression:"item.subTitle.stem.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1)])])},staticRenderFns:[]};var b=a("C7Lr")(f,w,!1,function(t){a("a5dy")},"data-v-8f3d7e18",null).exports,_=a("5L/K"),x={name:"EditGamePrivate",data:function(){return{lockImg:this.resourceData.image_lock_off,checkbox:!1,radio:1,switchStatus:!1,audio_name:"",image:{show:!0,x:0,y:0,lock:!1,width:0,height:0,name:"",ratio:0},sprite:{show:!1,x:"500",y:"0",name:"",scale:"1",loop:!1},animate:{show:!1,x:"100",y:"100",name:"",scale:"3",loop:!0}}},props:["allData","gameData","resourceData","item","index","tabShowStatus"],mounted:function(){},methods:{setImageLock:function(){this.image.lock=!this.image.lock,this.image.height&&this.image.width?this.image.lock&&(this.image.ratio=this.image.width/this.image.height):this.$message({message:"X或Y为0或为空 无法计算比例",type:"warning"})},setAttr:function(t,e){this.image.ratio>0&&("width"===e||"height"===e)&&this.image.lock&&("width"===e?(console.log(this.image.width,this.image.ratio),this.image.height=this.image.width/this.image.ratio):"height"===e&&(this.image.width=this.image.height*this.image.ratio))},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,i.className="el-icon-arrow-right"):(n()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),this.tabShowStatus[t].child[e]=!0,i.className="el-icon-arrow-down")},verifyAnimationFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},verifySpriteFiles:function(t){var e=[],a=l()(t).map(function(t,e){return t.name}).map(function(t){return e.push(t.split(".")[1]),t.split(".")[0]}),i=e.sort(function(t,e){return t.length-e.length}).toString(),n=["png","json"].toString(),s=a[0];return a.every(function(t,e){return s===t})&&i===n},uploadImage:function(t,e){var a=this,i=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(i)?0!==e.target.files.length?this.$http.post("/uploadingImage",{image:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.image.name=t.resourceName,a.image.width=t.width,a.image.height=t.height,a.updateResourceData(),e.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},uploadAnimation:function(t,e){var a=this;if(0!==e.target.files.length&&3===e.target.files.length)if(this.verifyAnimationFiles(e.target.files)){var i={};l()(e.target.files).forEach(function(t,e){i["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.animate.name=t.resourceName,e.target.value=""})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadSprite:function(t,e){var a=this;if(0!==e.target.files.length&&2===e.target.files.length)if(this.verifySpriteFiles(e.target.files)){var i={};l()(e.target.files).forEach(function(t,e){i["sprite"+(e+1)]=t}),console.log(i),this.$http.post("/uploadingSprite",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.sprite.name=t.resourceName,e.target.value=""})}else this.$message({message:"上传文件不符合",type:"warning"});else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadAudio:function(t,e){var a=this,i=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(i)?0!==e.target.files.length?this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.audio_name=t.resourceName,e.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},updateResourceData:function(){this.$emit("updateResourceData")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title"},[a("i",{ref:"option1Title",class:t.tabShowStatus[t.index].child.option1?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option1")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option1")}}},[t._v("\n        配置项1\n    ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option1,expression:"tabShowStatus[index].child.option1"}],staticClass:"game-inner"},[a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                复选框\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}},[t._v("图片\n                    ")])],1)])]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                单选框\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"edit-radio-title"},[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("图片")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("动画")]),t._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("精灵序列")])],1)])]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                开关\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"edit-switch"},[a("el-switch",{staticStyle:{float:"left"},attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.switchStatus,callback:function(e){t.switchStatus=e},expression:"switchStatus"}}),t._v(" "),a("span",{staticStyle:{float:"left"}},[t._v("loop")])],1)])]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                上传图片\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("image",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("image","x")}},model:{value:t.image.x,callback:function(e){t.$set(t.image,"x",e)},expression:"image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setAttr("image","y")}},model:{value:t.image.y,callback:function(e){t.$set(t.image,"y",e)},expression:"image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setAttr("image","width")}},model:{value:t.image.width,callback:function(e){t.$set(t.image,"width",e)},expression:"image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("div",{staticStyle:{float:"left","text-align":"center",width:"20%",height:"28px","margin-top":"15px","line-height":"32px"}},[t.image.lock?a("img",{staticStyle:{height:"14px",cursor:"pointer"},attrs:{src:t.resourceData.image_lock_on,alt:""},on:{click:function(e){return t.setImageLock()}}}):t._e(),t._v(" "),t.image.lock?t._e():a("img",{staticStyle:{height:"14px",cursor:"pointer"},attrs:{src:t.resourceData.image_lock_off,alt:""},on:{click:function(e){return t.setImageLock()}}})]),t._v(" "),a("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入内容",size:"mini"},on:{input:function(e){return t.setAttr("image","height")}},model:{value:t.image.height,callback:function(e){t.$set(t.image,"height",e)},expression:"image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                上传动画\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("option",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.animate.x,callback:function(e){t.$set(t.animate,"x",e)},expression:"animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.animate.y,callback:function(e){t.$set(t.animate,"y",e)},expression:"animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.animate.scale,callback:function(e){t.$set(t.animate,"scale",e)},expression:"animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.animate.loop,callback:function(e){t.$set(t.animate,"loop",e)},expression:"animate.loop"}})],1)],1)]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                上传精灵序列\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                        精灵文件：\n                    ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("option",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.sprite.x,callback:function(e){t.$set(t.sprite,"x",e)},expression:"sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.sprite.y,callback:function(e){t.$set(t.sprite,"y",e)},expression:"sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.sprite.scale,callback:function(e){t.$set(t.sprite,"scale",e)},expression:"sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.sprite.loop,callback:function(e){t.$set(t.sprite,"loop",e)},expression:"sprite.loop"}})],1)],1)]),t._v(" "),a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[t._v("\n                音频文件\n            ")]),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.audio_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio("audio",e)}}})])])])])])])])},staticRenderFns:[]};var S={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var C={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var D={name:"EditGame",data:function(){return{gameData:null,showStatus:!1,publicSourceData:null,tabShowStatus:[],publicChildStatus:{button:!1,animate:!1,audio:!1},publicStatus:!1,resourceData:null,feedbackAnimateData:null,tabShowLists:{bgImage:!1,stemImg:!1,subTitle:!1,option:!1,option1:!1,option2:!1,option3:!1,option4:!1,option5:!1,option6:!1,option7:!1,option8:!1,option9:!1,option10:!1}}},props:["allData"],methods:{setLock:function(t){},getJSON:function(){var t=this;this.getResourceData(function(){t.showStatus=!0}),this.gameData=this.allData.sources,this.feedbackAnimateData=this.allData.feedbackAnimate,this.publicSourceData=this.allData.publicSourceData,this.tabShowStatus=[],this.gameData.forEach(function(e,a){t.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(g()(t.tabShowLists))})})},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,t&&t()})},changeArr:function(t,e){var a=this;if("add"===t){var i=JSON.parse(g()(this.gameData[0]));!function t(e){l()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[n()(e)[i]]=!1:"string"==typeof a?e[n()(e)[i]]="":"number"==typeof a&&(e[n()(e)[i]]=0)})}(i),this.gameData.push(i),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(g()(this.tabShowLists))}),Object(_.CopyPageAndRender)(this.gameData.length-1,i,this.allData)}else if("copy"===t){var s=JSON.parse(g()(this.gameData[e]));this.gameData.push(JSON.parse(g()(this.gameData[e]))),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(g()(this.tabShowLists))}),Object(_.CopyPageAndRender)(this.gameData.length-1,s,this.allData)}else"del"===t&&this.gameData.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"}),a.gameData.splice(e,1),a.tabShowStatus.splice(e,1),store.dispatch("setPageNumber",0),window.stage.getChildByName("GAME").removeChildren(),Object(_.RenderAllData)(!0,a.allData)}).catch(function(){a.$message({type:"info",message:"已取消"})})},tabShow:function(t,e){var a=this,i=this.$refs[e+"Title"],s=this.tabShowStatus[t].show;if(n()(this.tabShowStatus[t].child).forEach(function(e,i){a.tabShowStatus[t].child[e]=!1}),s)this.tabShowStatus[t].show=!1,i.className="el-icon-arrow-right",store.dispatch("setPageNumber",-1);else{var o=window.stage.getChildByName("GAME");this.tabShowStatus.forEach(function(t,e){a.tabShowStatus[e].show=!1}),o.children.forEach(function(t,e){t.visible=!1}),this.tabShowStatus[t].show=!0,o.getChildByName("GAME"+t).visible=!0,i.className="el-icon-arrow-down",store.dispatch("setPageNumber",t)}console.log(store.state.pageNumber)},updateResourceData:function(){this.getResourceData()}},mounted:function(){this.getJSON()},components:{EditGamePublic:b,EditGamePrivate:a("C7Lr")(x,y,!1,function(t){a("DjJD")},"data-v-5e190c8a",null).exports,EditGameBefore:a("C7Lr")({name:"EditGameBefore",props:["allData","resourceData"],data:function(){return{}},methods:{updateResourceData:function(){this.$emit("updateResourceData")}},mounted:function(){}},S,!1,function(t){a("gIrc")},"data-v-7aa38658",null).exports,EditGameAfter:a("C7Lr")({name:"EditGameAfter",props:["allData","resourceData"],data:function(){return{}},methods:{updateResourceData:function(){this.$emit("updateResourceData")}},mounted:function(){}},C,!1,function(t){a("rPKm")},"data-v-46ea813a",null).exports}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"game"},[a("EditGameBefore",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._l(t.gameData,function(e,i){return a("div",{staticClass:"game-box",style:{marginTop:0===i?"8px":0}},[a("div",{staticClass:"game-title",staticStyle:{background:"#313131","padding-left":"8px","border-bottom":"1px solid #232323"},style:{background:t.tabShowStatus[i].show?"#409EFF":"#313131"},on:{click:function(e){return t.setLock(i)}}},[a("i",{ref:"oneTitle",refInFor:!0,class:t.tabShowStatus[i].show?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(i,"one")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(i,"one")}}},[t._v("\n                内容页"+t._s(i+1)+"\n            ")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",on:{click:function(e){return t.changeArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",on:{click:function(e){return t.changeArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",on:{click:function(e){return t.changeArr("add",i)}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[i].show,expression:"tabShowStatus[index].show"}]},[a("EditGamePublic",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("EditGamePrivate",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus,tabShowLists:t.tabShowLists},on:{updateResourceData:t.updateResourceData}})],1)])}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("EditGameAfter",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}})],2):t._e()},staticRenderFns:[]};var B=a("C7Lr")(D,A,!1,function(t){a("xPgI")},null,null).exports,I={name:"EditEnd",data:function(){return{time:0,label:"1",endData:null,showStatus:!1,tabShowStatus:{endBg:!1,goldNum:!1},fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],resourceData:null}},props:["allData"],methods:{setGoldTextFontStyle:function(t){this.endData.goldText[t]=!this.endData.goldText[t],this.endData.goldText[t]?this.endData.goldText.fontWeight="bold":this.endData.goldText.fontWeight="normal","italic"==t&&(this.endData.goldText[t]?this.endData.goldText.fontStyle="italic":this.endData.goldText.fontStyle="")},setResource:function(t,e){this.endData[t][e].show||(this.endData[t][e].name="")},tabShow:function(t,e){var a=this;this.$refs[e];this.tabShowStatus[t]?this.tabShowStatus[t]=!1:(n()(this.tabShowStatus).forEach(function(t,e){a.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0)},getJSON:function(){var t=this;this.endData=this.allData.one.end,this.getResourceData(function(){t.showStatus=!0})},getResourceData:function(t){var e=this;this.$http.get("/getResourceJSON",{params:{}}).then(function(a){e.resourceData=a,t&&t()})},uploadAnimation:function(t){var e=this;if(0!==t.target.files.length&&3===t.target.files.length){var a={};l()(t.target.files).forEach(function(t,e){a["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){t.target.value="",e.endData.endBg.animate.name=a.resourceName})}else this.$message({message:"上传文件个数不符合",type:"warning"})},uploadImage:function(t){var e=this,a=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(a)?0!==t.target.files.length?this.$http.post("/uploadingImage",{image:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a),t.target.value="",e.endData.endBg.image.name=a.resourceName,e.endData.endBg.image.width=a.width,e.endData.endBg.image.height=a.height,e.endData.endBg.image.x=0,e.endData.endBg.image.y=0,e.getResourceData()}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})}},mounted:function(){this.getJSON()}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"end"},[a("div",{staticClass:"end-time"},[a("el-input",{staticStyle:{width:"100%","margin-top":"0"},attrs:{placeholder:"",size:"mini"},model:{value:t.endData.jumpResultTime,callback:function(e){t.$set(t.endData,"jumpResultTime",e)},expression:"endData.jumpResultTime"}},[a("template",{slot:"prepend"},[t._v("最后一题停留时间")]),t._v(" "),a("template",{slot:"append"},[t._v("ms")])],2)],1),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"endBgTitle",class:t.tabShowStatus.endBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}},[t._v("\n            背景图\n        ")])]),t._v(" "),t.tabShowStatus.endBg?a("div",{staticClass:"end-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","image")}},model:{value:t.endData.endBg.image.show,callback:function(e){t.$set(t.endData.endBg.image,"show",e)},expression:"endData.endBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.endData.endBg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.x,callback:function(e){t.$set(t.endData.endBg.image,"x",e)},expression:"endData.endBg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.y,callback:function(e){t.$set(t.endData.endBg.image,"y",e)},expression:"endData.endBg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.width,callback:function(e){t.$set(t.endData.endBg.image,"width",e)},expression:"endData.endBg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.height,callback:function(e){t.$set(t.endData.endBg.image,"height",e)},expression:"endData.endBg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","animate")}},model:{value:t.endData.endBg.animate.show,callback:function(e){t.$set(t.endData.endBg.animate,"show",e)},expression:"endData.endBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                动画文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.endData.endBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.x,callback:function(e){t.$set(t.endData.endBg.animate,"x",e)},expression:"endData.endBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.y,callback:function(e){t.$set(t.endData.endBg.animate,"y",e)},expression:"endData.endBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.scale,callback:function(e){t.$set(t.endData.endBg.animate,"scale",e)},expression:"endData.endBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.endData.endBg.animate.loop,callback:function(e){t.$set(t.endData.endBg.animate,"loop",e)},expression:"endData.endBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"goldNumTitle",class:t.tabShowStatus.goldNum?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}},[t._v("\n            金币文字\n        ")])]),t._v(" "),t.tabShowStatus.goldNum?a("div",{staticClass:"end-inner"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.x,callback:function(e){t.$set(t.endData.goldText,"x",e)},expression:"endData.goldText.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.y,callback:function(e){t.$set(t.endData.goldText,"y",e)},expression:"endData.goldText.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.endData.goldText.fontFamily,callback:function(e){t.$set(t.endData.goldText,"fontFamily",e)},expression:"endData.goldText.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.fontSize,callback:function(e){t.$set(t.endData.goldText,"fontSize",e)},expression:"endData.goldText.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.endData.goldText.color,callback:function(e){t.$set(t.endData.goldText,"color",e)},expression:"endData.goldText.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.endData.goldText.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong")}}},[t._v("B")]),t._v(" "),a("span",{class:t.endData.goldText.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic")}}},[t._v("I")])])],1):t._e()]):t._e()},staticRenderFns:[]};var k=a("C7Lr")(I,T,!1,function(t){a("JdX2")},"data-v-7505a7f9",null).exports,N=(a("E/U7"),a("L7Pj")),E=a.n(N),z=a("7Q5p"),P=a.n(z),R=a("UoVs"),F=(a("pne8"),a("qWh7")),O=a.n(F),X=void 0,L={name:"start",data:function(){return{isShow:!1,number:0,answerStatus:[],answerData:[],option:["A","B","C","D","E","F","G","H"]}},methods:{createApp:function(){return new c.Application({width:1920,height:1080,autoSize:!0,transparent:!0})}},components:{},created:function(){document.getElementsByClassName("page-loading")[0].style.display="block"},props:["allData"],destroyed:function(){PIXI.sound.stopAll(),app.destroy()},mounted:function(){var t=this;PIXI.sound.stopAll(),document.getElementsByClassName("page-loading")[0].style.display="block",window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",app.view.id="appCanvas",window.stage=app.stage;this.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object(R.load)().then(function(e){console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),t.$nextTick(function(){window.question=e.question.data,X=e.question.data,e.question.data;var a=new O.a(X.one.start,e);stage.addChild(a),store.state.testNum=e.question.data.sources.length,document.getElementsByClassName("page-loading")[0].style.display="none",Object(_.RenderAllData)(!0,t.allData);var i=$(".container"),n=window.clientWidth-340+"px",s=(window.clientWidth-340)*(10.8/19.2)+"px";i.css({width:n,height:s})})})}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png",id:"logo"}})])},staticRenderFns:[]};var G=a("C7Lr")(L,M,!1,function(t){a("fiU8")},"data-v-090e2e97",null).exports,j=!0;a("IcnI");var q={name:"Edit",data:function(){return{allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:P.a.title,version:P.a.version,label:"2",submitStatus:!1}},components:{start:v,game:B,end:k,index:G},methods:{setContainer:function(t){store.dispatch("setPageNumber",-1),"ftp"===t?"start"===this.activeName?(window.stage.getChildByName("START").visible=!0,window.stage.getChildByName("GAME").visible=!1,window.stage.getChildByName("gameBgSound")&&window.stage.setChildIndex(window.stage.getChildByName("gameBgSound"),window.stage.children.length-1)):"game"===this.activeName&&(window.stage.getChildByName("START").visible=!1,window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(function(t){t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0):"start1"===this.activeName1?(window.stage.getChildByName("START").visible=!0,window.stage.getChildByName("GAME").visible=!1):"game1"===this.activeName1&&(window.stage.getChildByName("START").visible=!1,window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(function(t){t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0)},reload:function(){location.reload(!0)},reloadIframe:function(){location.reload(!0)},changeType:function(){"1"===this.label?this.allData.interface=!0:this.allData.interface=!1},getJSON:function(){var t=this;this.$http.get("/getJSON",{params:{}}).then(function(e){t.allData=e,console.log(t.allData.interface),t.allData.interface?t.label="1":t.label="2";var a=E()(".container"),i=window.clientWidth-340+"px",n=(window.clientWidth-340)*(10.8/19.2)+"px";a.css({width:i,height:n}),t.showStatus=!0})},writeJSON:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit";if(j){j=!1;var a=JSON.parse(g()(this.allData.one.end));!function t(e){l()(e).forEach(function(a,i){"object"===(void 0===a?"undefined":o()(a))?t(a):"boolean"==typeof a?e[n()(e)[i]]=!1:"string"==typeof a?e[n()(e)[i]]="":"number"==typeof a&&(e[n()(e)[i]]=0)})}(a),"1"===this.label&&(this.allData.one.end=a,console.log(this.allData.one.end)),this.$http.post("/writeJSON",{dataList:g()(this.allData)}).then(function(a){if(t.submitStatus=!0,E()(".submitBtn").removeClass("submitActive"),"preview"===e){var i=void 0,n="start"===t.activeName||"start1"===t.activeName1||-1==store.state.pageNumber?"true":"false";"true"===n&&store.dispatch("setPageNumber",0),i="http://localhost:8888/#/preview?id="+store.state.pageNumber+"&startStatus="+n,window.open(i)}setTimeout(function(){t.submitStatus=!1,j=!0,E()(".submitBtn").addClass("submitActive")},1e3)})}}},mounted:function(){this.getJSON(),window.onresize=function(){var t=E()(".container"),e=window.clientWidth-340+"px",a=(window.clientWidth-340)*(10.8/19.2)+"px";t.css({width:e,height:a})};window.location.href.split("#")[0]}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t.allData?a("div",{staticClass:"iframe"},[a("index",{ref:"container",attrs:{allData:t.allData}})],1):t._e(),t._v(" "),t.showStatus?a("div",{staticClass:"edit"},[a("header",[a("h1",{domProps:{textContent:t._s(t.modelName)}}),t._v(" "),a("p",{domProps:{textContent:t._s("版本号：v"+t.version)}})]),t._v(" "),a("div",{staticClass:"edit-tab"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("课件平台組课")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("ftp組课")])],1),t._v(" "),"1"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("new")}},model:{value:t.activeName1,callback:function(e){t.activeName1=e},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start1"}},["start1"===t.activeName1?a("start",{ref:"start1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game1"}},["game1"===t.activeName1?a("game",{ref:"game1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}},[t._v(">\n\n                ")]):t._e()],1)],1):t._e(),t._v(" "),"2"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("ftp")}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start"}},["start"===t.activeName?a("start",{ref:"start",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game"}},["game"===t.activeName?a("game",{ref:"game",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"结果页",name:"end"}},["end"===t.activeName?a("end",{ref:"end",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1)],1):t._e(),t._v(" "),a("div",{staticClass:"submit"},[a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary"},on:{click:function(e){return t.writeJSON("preview")}}},[t._v("预览")]),t._v(" "),a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary",disabled:t.submitStatus},on:{click:function(e){return t.writeJSON()}}},[t._v("保存")])],1)],1):t._e()])},staticRenderFns:[]};var Y=a("C7Lr")(q,W,!1,function(t){a("hdnE")},null,null);e.a=Y.exports},a5dy:function(t,e){},aGwf:function(t,e){},aNKv:function(t,e){},fiU8:function(t,e){},gIrc:function(t,e){},hdnE:function(t,e){},kkaZ:function(t,e,a){"use strict";a("E/U7");var i=a("L7Pj"),n=a.n(i),s=a("7Q5p"),o=a.n(s),r={name:"Edit",data:function(){return{allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:o.a.title,version:o.a.version,label:"2",submitStatus:!1}},methods:{reload:function(){location.reload(!0)}},mounted:function(){n()("#submitButton").on("click",function(){if(window.store.state.pShow){console.log("新接口强制提交");n()(".iframe iframe")[0].contentWindow.postMessage({type:"getAnswer"},"*")}else{console.log("旧接口强制提交");n()(".iframe iframe")[0].contentWindow.postMessage({type:"resubmitAnswer"},"*")}}),window.addEventListener("message",function(t){if("onload"==t.data.type)console.log("onload接口");else if("submitAnswer"==t.data.type){for(var e=t.data.data.testAnswer,a=t.data.data.testNum,i=0,s=0,o=0;o<a;o++)if(void 0!=e[o]){var r=e[o],l=r.answer.length;"string"==typeof r.answer&&(l=1);var d=r.rightnum;r.isright&&0,0==d&&0==r.type&&(s++,d=0),d>0&&0==r.type&&(d=l),r.is_right=d==l?1:0,r.rate=d/l,i+=r.rate}var g=i/a,m={goldnum:s=(s+=Math.ceil(10*g))>10?10:s,result:t.data.data.testAnswer};console.log("newData"),console.log(m);var u={type:"answerResult",data:m};n()(".iframe iframe")[0].contentWindow.postMessage(u,"*")}else if("submitData"==t.data.type){n()(".iframe iframe")[0].contentWindow.postMessage({type:"resubmitAnswer"},"*")}else if("close"==t.data.type)n()(".iframe iframe").attr("src",""),n()(".submitData").hide();else if("answer"==t.data.type){var c={type:"answerTextResult",data:t.data.data};n()(".iframe iframe")[0].contentWindow.postMessage(c,"*")}});var t=void 0;t="http://localhost:8888/#/?id="+this.$route.query.id+"&startStatus="+this.$route.query.startStatus,document.getElementById("iframeWindow").src=t}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("img",{attrs:{src:"static/images/reload.png",alt:"",id:"reload"},on:{click:function(e){return t.reload()}}}),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iframe"},[e("button",{attrs:{id:"submitButton"}},[this._v("强制提交")]),this._v(" "),e("iframe",{attrs:{src:"/",id:"iframeWindow",frameborder:"0"}})])}]};var d=a("C7Lr")(r,l,!1,function(t){a("l1+N")},"data-v-34c697a3",null);e.a=d.exports},"l1+N":function(t,e){},rPKm:function(t,e){},wwml:function(t,e){},xPgI:function(t,e){},xlLU:function(t,e){},zel7:function(t,e,a){"use strict";var i={data:function(){return{resultDate:store.state.resultArr}},mounted:function(){console.log("平台校验结果页出现")}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{staticClass:"resultTable",staticStyle:{width:"19.2rem",positon:"absolute",left:"50%","margin-left":"-9.6rem",top:"-5rem",padding:"0 1rem"},attrs:{data:this.resultDate}},[e("el-table-column",{staticStyle:{width:"1rem"},attrs:{prop:"id",label:"题号"}}),this._v(" "),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"userAnswerContent",label:"你的答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightAnswerContent",label:"正确答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"isRight",label:"校验结果"}})],1)},staticRenderFns:[]};var s=a("C7Lr")(i,n,!1,function(t){a("aGwf")},"data-v-0b169922",null);e.a=s.exports},zwgh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.load=function(){return window.res?new n.a(function(t,e){console.info(2),t(window.res)}):(console.info(1),new n.a(function(t,e){o.add("question","static/content.json"),o.add("resources","static/resource.json"),o.load(function(){var e=PIXI.loader.resources.resources.data;e.forEach(function(t){if(o.add(t.key,t.path),t.key.indexOf("image")>-1){var e=new Image;e.src=t.path,e.onerror=function(t){console.log(t),errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.target.src,type:"resourceLoadERROR"}))}}else if(t.key.indexOf("audio")>-1){var a=new Audio;a.src=t.path,a.onerror=function(e){errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.path,type:"resourceLoadERROR"}))}}}),o.load(function(e,a){window.res=a,t(a)}),o.onError.add(function(t){console.log(t)}),o.onProgress.add(function(t){document.getElementsByClassName("runner")[0].style.width=6.8*t.progress/100+"rem"}),o.onComplete.add(function(t){})})}))},e.getAnimation=function(t){return new PIXI.spine.Spine(res[t].spineData)},e.getSound=function(t){return res[t].data},e.createSprite=function(t){return console.log(new s.Sprite(t)),new s.Sprite(t)},e.getOptionTexture=function(t,e){return res[t].textures[e]},e.getTexture=function(t){return res[t].texture};var i=a("rVsN"),n=a.n(i),s=a("9bLE"),o=(a.n(s),a("an7y"),PIXI.loader)}},["NHnr"]);